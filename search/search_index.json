{"config":{"indexing":"full","lang":["en","ja"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"index Linux IP\u5909\u66f4(ip,ifconfig) IP\u5909\u66f4(netplan) IP\u5909\u66f4(nmcli) firewalld\u30e1\u30e2 \u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b ZABBIX\u69cb\u7bc9(VMware) ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b snmp\u8a2d\u5b9a snmp trap\u8a2d\u5b9a esxtop esxtop \u30d0\u30c3\u30c1 esxtop tips \u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d GUI\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577 PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (Windows) PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (ubuntu PowerShell PowerCLI) PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (ubuntu docker PowerCLI) MkDocs mkdocs","title":"index"},{"location":"#index","text":"","title":"index"},{"location":"#linux","text":"IP\u5909\u66f4(ip,ifconfig) IP\u5909\u66f4(netplan) IP\u5909\u66f4(nmcli) firewalld\u30e1\u30e2 \u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b ZABBIX\u69cb\u7bc9(VMware)","title":"Linux"},{"location":"#esxi","text":"OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b snmp\u8a2d\u5b9a snmp trap\u8a2d\u5b9a esxtop esxtop \u30d0\u30c3\u30c1 esxtop tips \u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d GUI\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577 PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (Windows) PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (ubuntu PowerShell PowerCLI) PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (ubuntu docker PowerCLI)","title":"ESXi"},{"location":"#mkdocs","text":"mkdocs","title":"MkDocs"},{"location":"about/","text":"about \u3059\u3050\u5fd8\u308c\u3066\u3057\u307e\u3046\u306e\u3067 :octicons-heart-fill-24:{ .heart } :fontawesome-solid-heart: :fontawesome-regular-face-laugh-wink: Note \u3053\u308c\u306fNote\u3067\u3059\u3002 aaa Tip \u3053\u308c\u306fTip\u3067\u3059\u3002 Warning \u3053\u308c\u306fWarning\u3067\u3059 Danger \u3053\u308c\u306fDanger\u3067\u3059\u3002 Success \u3053\u308c\u306fSaccess\u3067\u3059\u3002 Failure \u3053\u308c\u306fFailure\u3067\u3059\u3002 Bug \u3053\u308c\u306fbug\u3067\u3059\u3002 Summary \u3053\u308c\u306fsummary\u3067\u3059\u3002 \u4eca\u3059\u3050\u8cfc\u5165 https://jp.mercari.com/search?afid=2799704686&keyword=rtx+3090","title":"about"},{"location":"about/#about","text":"","title":"about"},{"location":"about/#_1","text":"\u3059\u3050\u5fd8\u308c\u3066\u3057\u307e\u3046\u306e\u3067 :octicons-heart-fill-24:{ .heart } :fontawesome-solid-heart: :fontawesome-regular-face-laugh-wink: Note \u3053\u308c\u306fNote\u3067\u3059\u3002 aaa Tip \u3053\u308c\u306fTip\u3067\u3059\u3002 Warning \u3053\u308c\u306fWarning\u3067\u3059 Danger \u3053\u308c\u306fDanger\u3067\u3059\u3002 Success \u3053\u308c\u306fSaccess\u3067\u3059\u3002 Failure \u3053\u308c\u306fFailure\u3067\u3059\u3002 Bug \u3053\u308c\u306fbug\u3067\u3059\u3002 Summary \u3053\u308c\u306fsummary\u3067\u3059\u3002 \u4eca\u3059\u3050\u8cfc\u5165 https://jp.mercari.com/search?afid=2799704686&keyword=rtx+3090","title":""},{"location":"esxi-cpuList/","text":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b \u30b3\u30a2\u6570\u3092\u78ba\u8a8d vsish -e ls /hardware/cpu/cpuList/ \u51fa\u529b\u4f8b 0 1 2 3 \u5404\u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d vsish -e get /hardware/cpu/cpuList/0 \u51fa\u529b\u4f8b CPU information { Family:0x19 Model:0x08 Type:0x00 Stepping:0x02 TSC Hz:3593249536 Processor Hz:3593249208 Bus Hz:99812478 Name:AuthenticAMD CPUID:CPUID content { 0:CPUID leaf { EAX:0x00000010 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 1:CPUID leaf { EAX:0x00a00f82 EBX:0x00400800 ECX:0x7efa320b EDX:0x178bfbff } 80:CPUID leaf { EAX:0x80000023 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 81:CPUID leaf { EAX:0x00a00f82 EBX:0x40000000 ECX:0x75c237ff EDX:0x2fd3fbff } 88:CPUID leaf { EAX:0x00003030 EBX:0x91bef75f ECX:0x0000603f EDX:0x00010007 } 8a:CPUID leaf { EAX:0x00000001 EBX:0x00008000 ECX:0x00000000 EDX:0x119bbcff } } APIC ID:0x00000000 Core:0 Module:0 Tile:0 Die:0 Package:0 Node:0 Number of microcode updates:0 Original Revision:0x0a008204 Current Revision:0x0a008204 Cache information:CPU cache information { L1 cache size (bytes):32768 L1 cache associativity:8 L1 cache line size (bytes):64 Number of CPUs (threads) sharing the L1 cache:2 L2 cache size (bytes):524288 L2 cache associativity:8 L2 cache line size (bytes):64 Number of CPUs (threads) sharing the L2 cache:2 L3 cache size (bytes):33554432 L3 cache associativity:16 L3 cache line size (bytes):64 Number of CPUs (threads) sharing the L3 cache:16 L4 cache size (bytes):-1 L4 cache associativity:-1 L4 cache line size (bytes):-1 Number of CPUs (threads) sharing the L4 cache:-1 } } \u53c2\u8003 https://kb.vmware.com/s/article/81166 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b"},{"location":"esxi-cpuList/#esxi-cpu","text":"","title":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b"},{"location":"esxi-cpuList/#_1","text":"vsish -e ls /hardware/cpu/cpuList/ \u51fa\u529b\u4f8b 0 1 2 3","title":"\u30b3\u30a2\u6570\u3092\u78ba\u8a8d"},{"location":"esxi-cpuList/#_2","text":"vsish -e get /hardware/cpu/cpuList/0 \u51fa\u529b\u4f8b CPU information { Family:0x19 Model:0x08 Type:0x00 Stepping:0x02 TSC Hz:3593249536 Processor Hz:3593249208 Bus Hz:99812478 Name:AuthenticAMD CPUID:CPUID content { 0:CPUID leaf { EAX:0x00000010 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 1:CPUID leaf { EAX:0x00a00f82 EBX:0x00400800 ECX:0x7efa320b EDX:0x178bfbff } 80:CPUID leaf { EAX:0x80000023 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 81:CPUID leaf { EAX:0x00a00f82 EBX:0x40000000 ECX:0x75c237ff EDX:0x2fd3fbff } 88:CPUID leaf { EAX:0x00003030 EBX:0x91bef75f ECX:0x0000603f EDX:0x00010007 } 8a:CPUID leaf { EAX:0x00000001 EBX:0x00008000 ECX:0x00000000 EDX:0x119bbcff } } APIC ID:0x00000000 Core:0 Module:0 Tile:0 Die:0 Package:0 Node:0 Number of microcode updates:0 Original Revision:0x0a008204 Current Revision:0x0a008204 Cache information:CPU cache information { L1 cache size (bytes):32768 L1 cache associativity:8 L1 cache line size (bytes):64 Number of CPUs (threads) sharing the L1 cache:2 L2 cache size (bytes):524288 L2 cache associativity:8 L2 cache line size (bytes):64 Number of CPUs (threads) sharing the L2 cache:2 L3 cache size (bytes):33554432 L3 cache associativity:16 L3 cache line size (bytes):64 Number of CPUs (threads) sharing the L3 cache:16 L4 cache size (bytes):-1 L4 cache associativity:-1 L4 cache line size (bytes):-1 Number of CPUs (threads) sharing the L4 cache:-1 } }","title":"\u5404\u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d"},{"location":"esxi-cpuList/#_3","text":"https://kb.vmware.com/s/article/81166","title":"\u53c2\u8003"},{"location":"esxi-cpuList/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-esxtop-1/","text":"ESXi esxtop \u57fa\u790e \u5b9f\u884c esxtop h help Switch display: c:cpu i:interrupt m:memory n:network d:disk adapter u:disk device v:disk VM p:power mgmt r:rdma device x:vsan v VM disk 12:30:57pm up 10 days 16 min, 1372 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.04, 0.03, 0.03 GID VMNAME VDEVNAME NVDISK CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s LAT/rd LAT/wr 31037 ZABBIX648 - 1 12.55 0.00 12.55 0.00 0.12 0.000 0.066 32106 TrueNAS-S23 - 8 50.80 0.00 50.80 0.00 0.58 0.000 0.031 73726 PROMETHEUS - 1 0.97 0.00 0.97 0.00 0.02 0.000 0.043 V VM cpu 12:31:29pm up 10 days 17 min, 1371 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.03, 0.03, 0.03 PCPU USED(%): 0.7 0.1 0.3 0.5 0.1 2.4 0.6 118 2.7 0.1 1.8 0.9 0.7 0.6 0.2 0.6 NUMA: 2.4 AVG: 2.4 PCPU UTIL(%): 0.8 0.1 0.4 0.7 0.2 2.5 1.6 99 2.7 0.2 1.9 0.5 0.8 0.8 0.2 0.6 NUMA: 2.6 AVG: 2.6 CORE UTIL(%): 0.2 0.9 2.7 99 3.1 2.3 0.8 0.8 NUMA: 5.8 AVG: 5.8 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 89857 89857 ubuntu-docker 26 5.13 6.90 0.00 2600.00 4.99 0.41 1746.33 0.04 0.00 0.00 0.00 73740 73740 Miracle8 40 5.03 7.71 0.30 4000.00 0.00 0.40 3487.48 0.02 0.00 0.00 0.00 296587 296587 VMwareESXi8-1 40 4.90 7.18 0.18 4000.00 0.00 1.76 3586.38 0.04 0.00 0.00 0.00 c 12:23:58pm up 5 days 13:36, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PCPU USED(%): 0.1 0.3 0.0 0.0 0.2 0.2 0.3 0.0 55 0.2 0.1 0.0 0.2 0.0 0.1 0.0 NUMA: 3.6 AVG: 3.6 PCPU UTIL(%): 0.1 0.1 0.0 0.0 0.6 0.3 0.4 0.1 98 0.5 0.2 0.0 0.2 0.0 0.0 0.0 NUMA: 6.3 AVG: 6.3 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 337279 337279 esxtop.578480 1 38.69 73.75 0.00 1.05 - 0.01 0.00 0.00 0.00 0.00 0.00 1 1 system 388 0.32 1036.63 0.00 25120.24 - 69.35 0.00 0.48 0.00 0.00 0.00 337162 337162 sshd.578467 1 0.09 0.38 0.00 74.05 - 0.02 0.00 0.00 0.00 0.00 0.00 p power mgmt m 12:25:00pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; MEM overcommit avg: 0.00, 0.00, 0.00 PMEM /MB: 32766 total: 381 vmk,1314 other, 31070 free VMKMEM/MB: 32604 managed: 940 minfree, 5106 rsvd, 27498 ursvd, high state PSHARE/MB: 32 shared, 32 common: 0 saving SWAP /MB: 0 curr, 0 rclmtgt: 0.00 r/s, 0.00 w/s ZIP /MB: 0 zipped, 0 saved MEMCTL/MB: 0 curr, 0 target, 0 max GID NAME MEMSZ GRANT CNSM SZTGT TCHD TCHD_W SWCUR SWTGT SWR/s SWW/s LLSWR/s LLSWW/s OVHDUW OVHD OVHDMAX 13814 hostd.526366 105.12 71.26 76.59 83.72 31.10 25.77 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 17469 vpxa.526791 33.77 19.65 24.49 26.45 8.14 3.30 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1041 vmsyslogd.52455 26.04 14.14 15.07 16.49 10.29 9.35 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 n network 12:25:20pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PORT-ID USED-BY TEAM-PNIC DNAME PKTTX/s MbTX/s PSZTX PKTRX/s MbRX/s PSZRX %DRPTX %DRPRX 67108867 Management n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108869 Shadow of vmnic0 n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108870 vmk0 vmnic0 vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 2214592516 vmnic0 - vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 d disk adapter 12:27:54pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 ADAPTR PATH NPTH CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s DAVG/cmd KAVG/cmd GAVG/cmd QAVG/cmd vmhba0 - 2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba1 - 1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba2 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba64 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 d disk device r rdma device i interrupt 12:27:05pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 COOKIE COUNT/s TIME/int COUNT_0 COUNT_1 COUNT_2 COUNT_3 COUNT_4 COUNT_5 COUNT_6 COUNT_7 COUNT_8 COUNT_9 COUNT_10 COUNT_11 COUNT_12 COUNT_13 COUNT_14 COUNT_15 D 0x0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V 0x1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V x vsan \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u57fa\u790e"},{"location":"esxi-esxtop-1/#esxi-esxtop","text":"","title":"ESXi esxtop \u57fa\u790e"},{"location":"esxi-esxtop-1/#_1","text":"esxtop","title":"\u5b9f\u884c"},{"location":"esxi-esxtop-1/#h-help","text":"Switch display: c:cpu i:interrupt m:memory n:network d:disk adapter u:disk device v:disk VM p:power mgmt r:rdma device x:vsan","title":"h help"},{"location":"esxi-esxtop-1/#v-vm-disk","text":"12:30:57pm up 10 days 16 min, 1372 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.04, 0.03, 0.03 GID VMNAME VDEVNAME NVDISK CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s LAT/rd LAT/wr 31037 ZABBIX648 - 1 12.55 0.00 12.55 0.00 0.12 0.000 0.066 32106 TrueNAS-S23 - 8 50.80 0.00 50.80 0.00 0.58 0.000 0.031 73726 PROMETHEUS - 1 0.97 0.00 0.97 0.00 0.02 0.000 0.043","title":"v VM disk"},{"location":"esxi-esxtop-1/#v-vm-cpu","text":"12:31:29pm up 10 days 17 min, 1371 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.03, 0.03, 0.03 PCPU USED(%): 0.7 0.1 0.3 0.5 0.1 2.4 0.6 118 2.7 0.1 1.8 0.9 0.7 0.6 0.2 0.6 NUMA: 2.4 AVG: 2.4 PCPU UTIL(%): 0.8 0.1 0.4 0.7 0.2 2.5 1.6 99 2.7 0.2 1.9 0.5 0.8 0.8 0.2 0.6 NUMA: 2.6 AVG: 2.6 CORE UTIL(%): 0.2 0.9 2.7 99 3.1 2.3 0.8 0.8 NUMA: 5.8 AVG: 5.8 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 89857 89857 ubuntu-docker 26 5.13 6.90 0.00 2600.00 4.99 0.41 1746.33 0.04 0.00 0.00 0.00 73740 73740 Miracle8 40 5.03 7.71 0.30 4000.00 0.00 0.40 3487.48 0.02 0.00 0.00 0.00 296587 296587 VMwareESXi8-1 40 4.90 7.18 0.18 4000.00 0.00 1.76 3586.38 0.04 0.00 0.00 0.00","title":"V VM cpu"},{"location":"esxi-esxtop-1/#c","text":"12:23:58pm up 5 days 13:36, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PCPU USED(%): 0.1 0.3 0.0 0.0 0.2 0.2 0.3 0.0 55 0.2 0.1 0.0 0.2 0.0 0.1 0.0 NUMA: 3.6 AVG: 3.6 PCPU UTIL(%): 0.1 0.1 0.0 0.0 0.6 0.3 0.4 0.1 98 0.5 0.2 0.0 0.2 0.0 0.0 0.0 NUMA: 6.3 AVG: 6.3 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 337279 337279 esxtop.578480 1 38.69 73.75 0.00 1.05 - 0.01 0.00 0.00 0.00 0.00 0.00 1 1 system 388 0.32 1036.63 0.00 25120.24 - 69.35 0.00 0.48 0.00 0.00 0.00 337162 337162 sshd.578467 1 0.09 0.38 0.00 74.05 - 0.02 0.00 0.00 0.00 0.00 0.00","title":"c"},{"location":"esxi-esxtop-1/#p-power-mgmt","text":"","title":"p power mgmt"},{"location":"esxi-esxtop-1/#m","text":"12:25:00pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; MEM overcommit avg: 0.00, 0.00, 0.00 PMEM /MB: 32766 total: 381 vmk,1314 other, 31070 free VMKMEM/MB: 32604 managed: 940 minfree, 5106 rsvd, 27498 ursvd, high state PSHARE/MB: 32 shared, 32 common: 0 saving SWAP /MB: 0 curr, 0 rclmtgt: 0.00 r/s, 0.00 w/s ZIP /MB: 0 zipped, 0 saved MEMCTL/MB: 0 curr, 0 target, 0 max GID NAME MEMSZ GRANT CNSM SZTGT TCHD TCHD_W SWCUR SWTGT SWR/s SWW/s LLSWR/s LLSWW/s OVHDUW OVHD OVHDMAX 13814 hostd.526366 105.12 71.26 76.59 83.72 31.10 25.77 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 17469 vpxa.526791 33.77 19.65 24.49 26.45 8.14 3.30 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1041 vmsyslogd.52455 26.04 14.14 15.07 16.49 10.29 9.35 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00","title":"m"},{"location":"esxi-esxtop-1/#n-network","text":"12:25:20pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PORT-ID USED-BY TEAM-PNIC DNAME PKTTX/s MbTX/s PSZTX PKTRX/s MbRX/s PSZRX %DRPTX %DRPRX 67108867 Management n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108869 Shadow of vmnic0 n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108870 vmk0 vmnic0 vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 2214592516 vmnic0 - vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00","title":"n network"},{"location":"esxi-esxtop-1/#d-disk-adapter","text":"12:27:54pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 ADAPTR PATH NPTH CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s DAVG/cmd KAVG/cmd GAVG/cmd QAVG/cmd vmhba0 - 2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba1 - 1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba2 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba64 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00","title":"d disk adapter"},{"location":"esxi-esxtop-1/#d-disk-device","text":"","title":"d disk device"},{"location":"esxi-esxtop-1/#r-rdma-device","text":"","title":"r rdma device"},{"location":"esxi-esxtop-1/#i-interrupt","text":"12:27:05pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 COOKIE COUNT/s TIME/int COUNT_0 COUNT_1 COUNT_2 COUNT_3 COUNT_4 COUNT_5 COUNT_6 COUNT_7 COUNT_8 COUNT_9 COUNT_10 COUNT_11 COUNT_12 COUNT_13 COUNT_14 COUNT_15 D 0x0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V 0x1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V","title":"i interrupt"},{"location":"esxi-esxtop-1/#x-vsan","text":"","title":"x vsan"},{"location":"esxi-esxtop-1/#_2","text":"","title":"\u5099\u8003"},{"location":"esxi-esxtop-1/#_3","text":"","title":"\u53c2\u8003"},{"location":"esxi-esxtop-1/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-esxtop-2/","text":"ESXi esxtop \u30d0\u30c3\u30c1 \u5b9f\u884c esxtop -b -d 2 -n 30 > esxtop-bat.csv option b: \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9 d: \u5b9f\u884c\u9593\u9694(\u79d2) n: \u5b9f\u884c\u56de\u6570 a: all all \u306f\u5927\u91cf\u306b\u51fa\u529b\u3055\u308c\u308b esxtop -b -d 2 -n 30 -a > esxtop-all.csv VM\u6307\u5b9a\u3067\u5bfe\u8c61\u3092\u7d5e\u308b \u5bfe\u8c61\u3092\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 esxtop -export-entity entitity.dat echo SchedGroup > vmselect.dat grep -i <VM-NAME> entity.dat >> vmselect.dat esxtop \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u5b9f\u884c esxtop -b -d 2 -n 30 -import-entity vmselect.dat > esxtop-vm.csv \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u30d0\u30c3\u30c1"},{"location":"esxi-esxtop-2/#esxi-esxtop","text":"","title":"ESXi esxtop \u30d0\u30c3\u30c1"},{"location":"esxi-esxtop-2/#_1","text":"esxtop -b -d 2 -n 30 > esxtop-bat.csv","title":"\u5b9f\u884c"},{"location":"esxi-esxtop-2/#option","text":"b: \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9 d: \u5b9f\u884c\u9593\u9694(\u79d2) n: \u5b9f\u884c\u56de\u6570 a: all","title":"option"},{"location":"esxi-esxtop-2/#all","text":"esxtop -b -d 2 -n 30 -a > esxtop-all.csv","title":"all \u306f\u5927\u91cf\u306b\u51fa\u529b\u3055\u308c\u308b"},{"location":"esxi-esxtop-2/#vm","text":"\u5bfe\u8c61\u3092\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 esxtop -export-entity entitity.dat echo SchedGroup > vmselect.dat grep -i <VM-NAME> entity.dat >> vmselect.dat esxtop \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u5b9f\u884c esxtop -b -d 2 -n 30 -import-entity vmselect.dat > esxtop-vm.csv","title":"VM\u6307\u5b9a\u3067\u5bfe\u8c61\u3092\u7d5e\u308b"},{"location":"esxi-esxtop-2/#_2","text":"","title":"\u5099\u8003"},{"location":"esxi-esxtop-2/#_3","text":"","title":"\u53c2\u8003"},{"location":"esxi-esxtop-2/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-esxtop-3/","text":"ESXi esxtop \u30c4\u30fc\u30eb GUI\u30c4\u30fc\u30eb NMONVisualizer https://nmonvisualizer.github.io/nmonvisualizer/ \u4fdd\u5b58\u3057\u305fcsv\u3092\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8868\u793a\u3059\u308b csv\u6574\u5f62 https://github.com/tkhskh/esxtop-utils \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u30c4\u30fc\u30eb"},{"location":"esxi-esxtop-3/#esxi-esxtop","text":"","title":"ESXi esxtop \u30c4\u30fc\u30eb"},{"location":"esxi-esxtop-3/#gui","text":"NMONVisualizer https://nmonvisualizer.github.io/nmonvisualizer/ \u4fdd\u5b58\u3057\u305fcsv\u3092\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8868\u793a\u3059\u308b","title":"GUI\u30c4\u30fc\u30eb"},{"location":"esxi-esxtop-3/#csv","text":"https://github.com/tkhskh/esxtop-utils","title":"csv\u6574\u5f62"},{"location":"esxi-esxtop-3/#_1","text":"","title":"\u5099\u8003"},{"location":"esxi-esxtop-3/#_2","text":"","title":"\u53c2\u8003"},{"location":"esxi-esxtop-3/#_3","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-gui-timeout/","text":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577 \u30db\u30b9\u30c8 ->\u7ba1\u7406 \u3000->\u30b7\u30b9\u30c6\u30e0 \u3000\u3000->\u8a73\u7d30\u8a2d\u5b9a HostClientSessionTimeout \u3092\u300c0\u300d\u306b\u3059\u308b \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577"},{"location":"esxi-gui-timeout/#esxi-gui","text":"\u30db\u30b9\u30c8 ->\u7ba1\u7406 \u3000->\u30b7\u30b9\u30c6\u30e0 \u3000\u3000->\u8a73\u7d30\u8a2d\u5b9a HostClientSessionTimeout \u3092\u300c0\u300d\u306b\u3059\u308b","title":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577"},{"location":"esxi-gui-timeout/#_1","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-media-min/","text":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001Shift \uff0b O runewasel cdromBoot \u306e\u5f8c\u308d\u306b systemMediaSize=min \u3092\u5165\u529b\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u53c2\u8003 https://kb.vmware.com/s/article/81166 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b"},{"location":"esxi-media-min/#esxi-os","text":"","title":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b"},{"location":"esxi-media-min/#shift-o","text":"","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001Shift \uff0b O"},{"location":"esxi-media-min/#runewasel-cdromboot","text":"systemMediaSize=min \u3092\u5165\u529b\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","title":"runewasel cdromBoot \u306e\u5f8c\u308d\u306b"},{"location":"esxi-media-min/#_1","text":"https://kb.vmware.com/s/article/81166","title":"\u53c2\u8003"},{"location":"esxi-media-min/#_2","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-powercli-1/","text":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Install-Module Vmware.PowerCLI Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File Set-ExecutionPolicy RemoteSigned \u30ed\u30b0 \u4e8b\u524d\u78ba\u8a8d PS C:\\WINDOWS\\system32> $PSVersionTable Name Value ---- ----- PSVersion 5.1.19041.3930 PSEdition Desktop PSCompatibleVersions {1.0, 2.0, 3.0, 4.0...} BuildVersion 10.0.19041.3930 CLRVersion 4.0.30319.42000 WSManStackVersion 3.0 PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 Install-Module VMware.PowerCLI PS C:\\WINDOWS\\system32> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS C:\\WINDOWS\\system32> \u53c2\u8003 https://t-dilemma.info/vsphere-cmd-powercli/ https://developer.vmware.com/docs/powercli/latest/products/vmwarevsphereandvsan/ https://blogs.vmware.com/vmware-japan/2021/02/tam-blog-powercli-01.html PS C:\\WINDOWS\\system32> Install-Module VMware.PowerCLI \u4fe1\u983c\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4fe1\u983c\u3059\u308b\u5834\u5408\u306f\u3001Set-PSReposit ory \u30b3\u30de\u30f3\u30c9\u30ec\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e InstallationPolicy \u306e\u5024\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'PSGallery' \u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304b? [Y] \u306f\u3044(Y) [A] \u3059\u3079\u3066\u7d9a\u884c(A) [N] \u3044\u3044\u3048(N) [L] \u3059\u3079\u3066\u7121\u8996(L) [S] \u4e2d\u65ad(S) [?] \u30d8\u30eb\u30d7 (\u65e2\u5b9a\u5024\u306f \"N\"): A PS C:\\WINDOWS\\system32> Get-ExecutionPolicy Restricted PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' \u30c7\u30a3\u30ec\u30af\u30c8\u30ea: C:\\Program Files\\WindowsPowerShell\\Modules Mode LastWriteTime Length Name ---- ------------- ------ ---- d----- 2023/07/19 11:01 Microsoft.PowerShell.Operation.Validation d----- 2023/07/19 11:01 PackageManagement d----- 2023/07/19 11:01 Pester d----- 2023/07/19 11:01 PowerShellGet d----- 2023/07/19 11:01 PSReadline d----- 2024/01/23 13:22 VMware.CloudServices d----- 2024/01/23 13:23 VMware.DeployAutomation d----- 2024/01/23 13:23 VMware.ImageBuilder d----- 2024/01/23 13:33 VMware.PowerCLI d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk.Types d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.ApplianceService d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.CertificateManagement d----- 2024/01/23 13:30 VMware.Sdk.Nsx.Policy d----- 2024/01/23 13:23 VMware.Sdk.Runtime d----- 2024/01/23 13:30 VMware.Sdk.Srm d----- 2024/01/23 13:32 VMware.Sdk.Vcf.CloudBuilder d----- 2024/01/23 13:33 VMware.Sdk.Vcf.SddcManager d----- 2024/01/23 13:30 VMware.Sdk.Vr d----- 2024/01/23 13:25 VMware.Sdk.vSphere d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Access d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Health d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.InfraProfile d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.LocalAccounts d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Logging d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Networking d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Recovery d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.SupportBundle d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.System d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Update d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis.Tagging d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.ContentLibrary d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hcl d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hosts d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Settings d----- 2024/01/23 13:24 VMware.Sdk.vSphere.VAPI.Metadata d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authentication d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authorization d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.CertManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ConsumptionDomains d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Datastore d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Deployment d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Guest d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.HVC d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Identity d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Inventory d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ISO d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.LCM d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.NamespaceManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Namespaces d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.OVF d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Services d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Storage d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.SystemConfig d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Tagging d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Topology d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.TrustedInfrastructure d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VCHA d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Vm d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VmTemplate d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vStats d----- 2024/01/23 13:23 VMware.Sdk.vSphereRuntime d----- 2024/01/23 13:22 VMware.Vim d----- 2024/01/23 13:22 VMware.VimAutomation.Cis.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Cloud d----- 2024/01/23 13:22 VMware.VimAutomation.Common d----- 2024/01/23 13:22 VMware.VimAutomation.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Hcx d----- 2024/01/23 13:23 VMware.VimAutomation.HorizonView d----- 2024/01/23 13:22 VMware.VimAutomation.License d----- 2024/01/23 13:23 VMware.VimAutomation.Nsxt d----- 2024/01/23 13:22 VMware.VimAutomation.Sdk d----- 2024/01/23 13:23 VMware.VimAutomation.Security d----- 2024/01/23 13:22 VMware.VimAutomation.Srm d----- 2024/01/23 13:22 VMware.VimAutomation.Storage d----- 2024/01/23 13:23 VMware.VimAutomation.StorageUtility d----- 2024/01/23 13:22 VMware.VimAutomation.Vds d----- 2024/01/23 13:22 VMware.VimAutomation.Vmc d----- 2024/01/23 13:23 VMware.VimAutomation.vROps d----- 2024/01/23 13:23 VMware.VimAutomation.WorkloadManagement d----- 2024/01/23 13:23 VMware.VumAutomation \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-1/#windows-powershell-posercli","text":"","title":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-1/#_1","text":"Install-Module Vmware.PowerCLI Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File Set-ExecutionPolicy RemoteSigned","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-1/#_2","text":"","title":"\u30ed\u30b0"},{"location":"esxi-powercli-1/#_3","text":"PS C:\\WINDOWS\\system32> $PSVersionTable Name Value ---- ----- PSVersion 5.1.19041.3930 PSEdition Desktop PSCompatibleVersions {1.0, 2.0, 3.0, 4.0...} BuildVersion 10.0.19041.3930 CLRVersion 4.0.30319.42000 WSManStackVersion 3.0 PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 Install-Module VMware.PowerCLI PS C:\\WINDOWS\\system32> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS C:\\WINDOWS\\system32>","title":"\u4e8b\u524d\u78ba\u8a8d"},{"location":"esxi-powercli-1/#_4","text":"https://t-dilemma.info/vsphere-cmd-powercli/ https://developer.vmware.com/docs/powercli/latest/products/vmwarevsphereandvsan/ https://blogs.vmware.com/vmware-japan/2021/02/tam-blog-powercli-01.html PS C:\\WINDOWS\\system32> Install-Module VMware.PowerCLI \u4fe1\u983c\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4fe1\u983c\u3059\u308b\u5834\u5408\u306f\u3001Set-PSReposit ory \u30b3\u30de\u30f3\u30c9\u30ec\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e InstallationPolicy \u306e\u5024\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'PSGallery' \u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304b? [Y] \u306f\u3044(Y) [A] \u3059\u3079\u3066\u7d9a\u884c(A) [N] \u3044\u3044\u3048(N) [L] \u3059\u3079\u3066\u7121\u8996(L) [S] \u4e2d\u65ad(S) [?] \u30d8\u30eb\u30d7 (\u65e2\u5b9a\u5024\u306f \"N\"): A PS C:\\WINDOWS\\system32> Get-ExecutionPolicy Restricted PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' \u30c7\u30a3\u30ec\u30af\u30c8\u30ea: C:\\Program Files\\WindowsPowerShell\\Modules Mode LastWriteTime Length Name ---- ------------- ------ ---- d----- 2023/07/19 11:01 Microsoft.PowerShell.Operation.Validation d----- 2023/07/19 11:01 PackageManagement d----- 2023/07/19 11:01 Pester d----- 2023/07/19 11:01 PowerShellGet d----- 2023/07/19 11:01 PSReadline d----- 2024/01/23 13:22 VMware.CloudServices d----- 2024/01/23 13:23 VMware.DeployAutomation d----- 2024/01/23 13:23 VMware.ImageBuilder d----- 2024/01/23 13:33 VMware.PowerCLI d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk.Types d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.ApplianceService d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.CertificateManagement d----- 2024/01/23 13:30 VMware.Sdk.Nsx.Policy d----- 2024/01/23 13:23 VMware.Sdk.Runtime d----- 2024/01/23 13:30 VMware.Sdk.Srm d----- 2024/01/23 13:32 VMware.Sdk.Vcf.CloudBuilder d----- 2024/01/23 13:33 VMware.Sdk.Vcf.SddcManager d----- 2024/01/23 13:30 VMware.Sdk.Vr d----- 2024/01/23 13:25 VMware.Sdk.vSphere d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Access d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Health d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.InfraProfile d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.LocalAccounts d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Logging d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Networking d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Recovery d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.SupportBundle d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.System d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Update d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis.Tagging d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.ContentLibrary d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hcl d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hosts d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Settings d----- 2024/01/23 13:24 VMware.Sdk.vSphere.VAPI.Metadata d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authentication d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authorization d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.CertManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ConsumptionDomains d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Datastore d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Deployment d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Guest d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.HVC d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Identity d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Inventory d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ISO d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.LCM d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.NamespaceManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Namespaces d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.OVF d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Services d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Storage d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.SystemConfig d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Tagging d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Topology d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.TrustedInfrastructure d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VCHA d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Vm d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VmTemplate d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vStats d----- 2024/01/23 13:23 VMware.Sdk.vSphereRuntime d----- 2024/01/23 13:22 VMware.Vim d----- 2024/01/23 13:22 VMware.VimAutomation.Cis.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Cloud d----- 2024/01/23 13:22 VMware.VimAutomation.Common d----- 2024/01/23 13:22 VMware.VimAutomation.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Hcx d----- 2024/01/23 13:23 VMware.VimAutomation.HorizonView d----- 2024/01/23 13:22 VMware.VimAutomation.License d----- 2024/01/23 13:23 VMware.VimAutomation.Nsxt d----- 2024/01/23 13:22 VMware.VimAutomation.Sdk d----- 2024/01/23 13:23 VMware.VimAutomation.Security d----- 2024/01/23 13:22 VMware.VimAutomation.Srm d----- 2024/01/23 13:22 VMware.VimAutomation.Storage d----- 2024/01/23 13:23 VMware.VimAutomation.StorageUtility d----- 2024/01/23 13:22 VMware.VimAutomation.Vds d----- 2024/01/23 13:22 VMware.VimAutomation.Vmc d----- 2024/01/23 13:23 VMware.VimAutomation.vROps d----- 2024/01/23 13:23 VMware.VimAutomation.WorkloadManagement d----- 2024/01/23 13:23 VMware.VumAutomation","title":"\u53c2\u8003"},{"location":"esxi-powercli-1/#_5","text":"","title":"\u53c2\u8003"},{"location":"esxi-powercli-1/#_6","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-powercli-2/","text":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell) Ubuntu \u3078\u306e PowerShell \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u3088\u308b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb PowerShell 7.2 \u3067\u5c0e\u5165\u3055\u308c\u305f\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3057\u305f\u3002 \u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u304b\u3089 Ubuntu \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306b\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3078\u306e\u30ea\u30f3\u30af\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002 \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.4 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.4.1/powershell_7.4.1-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.3.11 (\u5b89\u5b9a\u7248) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.3.11/powershell_7.3.11-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.2.18 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.2.18/powershell_7.2.18-1.deb_amd64.de Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 # Prerequisites # Update the list of packages sudo apt-get update # Install pre-requisite packages. sudo apt-get install -y wget apt-transport-https software-properties-common # Get the version of Ubuntu source /etc/os-release # Download the Microsoft repository keys wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb # Register the Microsoft repository keys sudo dpkg -i packages-microsoft-prod.deb # Delete the Microsoft repository keys file rm packages-microsoft-prod.deb # Update the list of packages after we added packages.microsoft.com sudo apt-get update ################################### # Install PowerShell sudo apt-get install -y powershell # Start PowerShell pwsh Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u51fa\u529b\u4f8b taka@ubuntu22:~$ sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 powershell \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002 (\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 131064 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002) powershell_7.4.1-1.deb_amd64.deb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ... powershell (7.4.1-1.deb) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059... powershell (7.4.1-1.deb) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ... man-db (2.10.2-1) \u306e\u30c8\u30ea\u30ac\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059 ... taka@ubuntu22:~$ taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> $PSVersionTable Name Value ---- ----- PSVersion 7.4.1 PSEdition Core GitCommitId 7.4.1 OS Ubuntu 22.04.3 LTS Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /home/taka> PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb pwsh Install-Module Vmware.PowerCLI \u51fa\u529b\u4f8b taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> Install-Module Vmware.PowerCLI Untrusted repository You are installing the modules from an untrusted repository. If you trust this repository, change its InstallationPolicy value by running the Set-PSRepository cmdlet. Are you sure you want to install the modules from 'PSGallery'? [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"N\"): A Installing package 'VMware.PowerCLI' [Installing dependent package 'VMware.PowerCLI.Sdk.Types' ] Installing package 'VMware.PowerCLI.Sdk.Types' [Unzipping ] PS /home/taka> vCenter\u63a5\u7d9a\u78ba\u8a8d Connect-VIServer -Server <IP> -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /home/taka> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /home/taka> PS /home/taka> PS /home/taka> Get-VM ubuntu2204 | Get-VMResourceConfiguration | select CpuLimitMhz CpuLimitMhz ----------- -1 PS /home/taka> (get-vm ubuntu,Windows | get-View)| select Name,{$_.Config.CpuAffinity.AffinitySet} Name $_.Config.CpuAffinity.AffinitySet ---- --------------------------------- ubuntu {4, 5, 6, 7} windows {4, 5, 6, 7} PS /home/taka> \u53c2\u8003 https://learn.microsoft.com/ja-jp/powershell/scripting/install/install-ubuntu?view=powershell-7.4 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell)"},{"location":"esxi-powercli-2/#powercli-powershell","text":"","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell)"},{"location":"esxi-powercli-2/#ubuntu-powershell-powercli","text":"","title":"Ubuntu \u3078\u306e PowerShell \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-2/#_1","text":"PowerShell 7.2 \u3067\u5c0e\u5165\u3055\u308c\u305f\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3057\u305f\u3002 \u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u304b\u3089 Ubuntu \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306b\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3078\u306e\u30ea\u30f3\u30af\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002 \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.4 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.4.1/powershell_7.4.1-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.3.11 (\u5b89\u5b9a\u7248) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.3.11/powershell_7.3.11-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.2.18 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.2.18/powershell_7.2.18-1.deb_amd64.de","title":"\u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u3088\u308b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-2/#power-shell","text":"# Prerequisites # Update the list of packages sudo apt-get update # Install pre-requisite packages. sudo apt-get install -y wget apt-transport-https software-properties-common # Get the version of Ubuntu source /etc/os-release # Download the Microsoft repository keys wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb # Register the Microsoft repository keys sudo dpkg -i packages-microsoft-prod.deb # Delete the Microsoft repository keys file rm packages-microsoft-prod.deb # Update the list of packages after we added packages.microsoft.com sudo apt-get update ################################### # Install PowerShell sudo apt-get install -y powershell # Start PowerShell pwsh","title":"Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8"},{"location":"esxi-powercli-2/#power-shell_1","text":"sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u51fa\u529b\u4f8b taka@ubuntu22:~$ sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 powershell \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002 (\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 131064 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002) powershell_7.4.1-1.deb_amd64.deb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ... powershell (7.4.1-1.deb) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059... powershell (7.4.1-1.deb) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ... man-db (2.10.2-1) \u306e\u30c8\u30ea\u30ac\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059 ... taka@ubuntu22:~$ taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> $PSVersionTable Name Value ---- ----- PSVersion 7.4.1 PSEdition Core GitCommitId 7.4.1 OS Ubuntu 22.04.3 LTS Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /home/taka>","title":"Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-2/#powercli","text":"pwsh Install-Module Vmware.PowerCLI \u51fa\u529b\u4f8b taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> Install-Module Vmware.PowerCLI Untrusted repository You are installing the modules from an untrusted repository. If you trust this repository, change its InstallationPolicy value by running the Set-PSRepository cmdlet. Are you sure you want to install the modules from 'PSGallery'? [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"N\"): A Installing package 'VMware.PowerCLI' [Installing dependent package 'VMware.PowerCLI.Sdk.Types' ] Installing package 'VMware.PowerCLI.Sdk.Types' [Unzipping ] PS /home/taka>","title":"PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-2/#vcenter","text":"Connect-VIServer -Server <IP> -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /home/taka> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /home/taka> PS /home/taka> PS /home/taka> Get-VM ubuntu2204 | Get-VMResourceConfiguration | select CpuLimitMhz CpuLimitMhz ----------- -1 PS /home/taka> (get-vm ubuntu,Windows | get-View)| select Name,{$_.Config.CpuAffinity.AffinitySet} Name $_.Config.CpuAffinity.AffinitySet ---- --------------------------------- ubuntu {4, 5, 6, 7} windows {4, 5, 6, 7} PS /home/taka>","title":"vCenter\u63a5\u7d9a\u78ba\u8a8d"},{"location":"esxi-powercli-2/#_2","text":"https://learn.microsoft.com/ja-jp/powershell/scripting/install/install-ubuntu?view=powershell-7.4","title":"\u53c2\u8003"},{"location":"esxi-powercli-2/#_3","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-powercli-3/","text":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker) Ubuntu \u3078\u306e docker \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb docker \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb apt install sudo apt install docker.io PowerCLI install with docker sudo su - \u51fa\u529b\u4f8b root@ubuntu22:~# systemctl status containerd.service \u25cf containerd.service - containerd container runtime Loaded: loaded (/lib/systemd/system/containerd.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-02-02 16:48:51 JST; 1min 5s ago Docs: https://containerd.io Main PID: 2615 (containerd) Tasks: 10 Memory: 14.7M CPU: 572ms CGroup: /system.slice/containerd.service mq2615 /usr/bin/containerd 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511503688+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511633595+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511755423+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511812952+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511836373+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511876160+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511965293+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512088658+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512201855+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 systemd[1]: Started containerd container runtime. root@ubuntu22:~# docker pull docker pull vmware/powerclicore:latest \u51fa\u529b\u4f8b root@ubuntu22:~# docker pull vmware/powerclicore:latest latest: Pulling from vmware/powerclicore ca1778b69356: Pull complete 052498a0600e: Pull complete e4bb439630bb: Pull complete 6c548366e47a: Pull complete 21c27127fa53: Pull complete 45ba8533c4dc: Pull complete 149c0c565f74: Pull complete a4218067cd6b: Pull complete 4d4343a21bed: Pull complete fa5ef76a57a5: Pull complete Digest: sha256:5d13398ec75c0c3858f2f68a598db4368f4c22a98d0d67ce926b181e420778d3 Status: Downloaded newer image for vmware/powerclicore:latest docker.io/vmware/powerclicore:latest root@ubuntu22:~# docker run docker run --rm -it vmware/powerclicore \u51fa\u529b\u4f8b root@ubuntu22:~# docker run --rm -it vmware/powerclicore PowerShell 7.2.11 Copyright (c) Microsoft Corporation. https://aka.ms/powershell Type 'help' to get help. PS /root> PowerCLI\u78ba\u8a8d \u30d0\u30fc\u30b8\u30e7\u30f3 $PSVersionTable \u51fa\u529b\u4f8b PS /root> $PSVersionTable Name Value ---- ----- PSVersion 7.2.11 PSEdition Core GitCommitId 7.2.11 OS Linux 5.15.0-92-generic #102-Ubuntu SMP Wed Jan 10 09:33:48 UTC 2024 Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /root> vCenter\u63a5\u7d9a Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /root> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /root> \u52d5\u4f5c\u78ba\u8a8d PS /root> Get-VM Name PowerState Num CPUs MemoryGB ---- ---------- -------- -------- ubuntu2204 PoweredOff 4 8.000 ZABBIX PoweredOn 4 4.000 UBUNTU22 PoweredOn 4 8.000 WinDev2311Eval PoweredOff 4 8.000 vCenter PoweredOn 4 19.000 K8S-00 PoweredOn 4 8.000 JMETER-DESKTOP PoweredOn 4 8.000 JMETER PoweredOff 4 8.000 UBUNTU22-DESKTOP PoweredOff 4 8.000 PS /root> \u53c2\u8003 https://github.com/vmware/powerclicore \u5e83\u544a \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker)"},{"location":"esxi-powercli-3/#powercli-docker","text":"","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker)"},{"location":"esxi-powercli-3/#ubuntu-docker-powercli","text":"","title":"Ubuntu \u3078\u306e docker \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-3/#docker","text":"","title":"docker \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"esxi-powercli-3/#apt-install","text":"sudo apt install docker.io","title":"apt install"},{"location":"esxi-powercli-3/#powercli-install","text":"","title":"PowerCLI install"},{"location":"esxi-powercli-3/#with-docker","text":"sudo su - \u51fa\u529b\u4f8b root@ubuntu22:~# systemctl status containerd.service \u25cf containerd.service - containerd container runtime Loaded: loaded (/lib/systemd/system/containerd.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-02-02 16:48:51 JST; 1min 5s ago Docs: https://containerd.io Main PID: 2615 (containerd) Tasks: 10 Memory: 14.7M CPU: 572ms CGroup: /system.slice/containerd.service mq2615 /usr/bin/containerd 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511503688+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511633595+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511755423+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511812952+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511836373+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511876160+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511965293+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512088658+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512201855+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 systemd[1]: Started containerd container runtime. root@ubuntu22:~#","title":"with docker"},{"location":"esxi-powercli-3/#docker-pull","text":"docker pull vmware/powerclicore:latest \u51fa\u529b\u4f8b root@ubuntu22:~# docker pull vmware/powerclicore:latest latest: Pulling from vmware/powerclicore ca1778b69356: Pull complete 052498a0600e: Pull complete e4bb439630bb: Pull complete 6c548366e47a: Pull complete 21c27127fa53: Pull complete 45ba8533c4dc: Pull complete 149c0c565f74: Pull complete a4218067cd6b: Pull complete 4d4343a21bed: Pull complete fa5ef76a57a5: Pull complete Digest: sha256:5d13398ec75c0c3858f2f68a598db4368f4c22a98d0d67ce926b181e420778d3 Status: Downloaded newer image for vmware/powerclicore:latest docker.io/vmware/powerclicore:latest root@ubuntu22:~#","title":"docker pull"},{"location":"esxi-powercli-3/#docker-run","text":"docker run --rm -it vmware/powerclicore \u51fa\u529b\u4f8b root@ubuntu22:~# docker run --rm -it vmware/powerclicore PowerShell 7.2.11 Copyright (c) Microsoft Corporation. https://aka.ms/powershell Type 'help' to get help. PS /root>","title":"docker run"},{"location":"esxi-powercli-3/#powercli","text":"","title":"PowerCLI\u78ba\u8a8d"},{"location":"esxi-powercli-3/#_1","text":"$PSVersionTable \u51fa\u529b\u4f8b PS /root> $PSVersionTable Name Value ---- ----- PSVersion 7.2.11 PSEdition Core GitCommitId 7.2.11 OS Linux 5.15.0-92-generic #102-Ubuntu SMP Wed Jan 10 09:33:48 UTC 2024 Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /root>","title":"\u30d0\u30fc\u30b8\u30e7\u30f3"},{"location":"esxi-powercli-3/#vcenter","text":"Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /root> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /root>","title":"vCenter\u63a5\u7d9a"},{"location":"esxi-powercli-3/#_2","text":"PS /root> Get-VM Name PowerState Num CPUs MemoryGB ---- ---------- -------- -------- ubuntu2204 PoweredOff 4 8.000 ZABBIX PoweredOn 4 4.000 UBUNTU22 PoweredOn 4 8.000 WinDev2311Eval PoweredOff 4 8.000 vCenter PoweredOn 4 19.000 K8S-00 PoweredOn 4 8.000 JMETER-DESKTOP PoweredOn 4 8.000 JMETER PoweredOff 4 8.000 UBUNTU22-DESKTOP PoweredOff 4 8.000 PS /root>","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"esxi-powercli-3/#_3","text":"https://github.com/vmware/powerclicore","title":"\u53c2\u8003"},{"location":"esxi-powercli-3/#_4","text":"","title":"\u5e83\u544a"},{"location":"esxi-powercli-3/#_5","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-snmp-trap/","text":"ESXi snmp trap \u8a2d\u5b9a \u8a2d\u5b9a\u78ba\u8a8d esxcli system snmp get \u5b9b\u5148\u306e\u6307\u5b9a esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public \u8907\u6570\u6307\u5b9a\u306f\u300c,\u300d\u3067\u533a\u5207\u308b esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public,192.168.0.2@162/public,192.168.0.3@162/public \u78ba\u8a8d esxcli system snmp test \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi snmp trap \u8a2d\u5b9a"},{"location":"esxi-snmp-trap/#esxi-snmp-trap","text":"","title":"ESXi snmp trap \u8a2d\u5b9a"},{"location":"esxi-snmp-trap/#_1","text":"esxcli system snmp get","title":"\u8a2d\u5b9a\u78ba\u8a8d"},{"location":"esxi-snmp-trap/#_2","text":"esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public","title":"\u5b9b\u5148\u306e\u6307\u5b9a"},{"location":"esxi-snmp-trap/#_3","text":"esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public,192.168.0.2@162/public,192.168.0.3@162/public","title":"\u8907\u6570\u6307\u5b9a\u306f\u300c,\u300d\u3067\u533a\u5207\u308b"},{"location":"esxi-snmp-trap/#_4","text":"esxcli system snmp test","title":"\u78ba\u8a8d"},{"location":"esxi-snmp-trap/#_5","text":"","title":"\u53c2\u8003"},{"location":"esxi-snmp-trap/#_6","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"esxi-snmp/","text":"ESXi snmp \u8a2d\u5b9a \u78ba\u8a8d esxcli system snmp get \u5fc5\u9808 \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306e\u6307\u5b9a esxcli system snmp set --communities public \u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u5316 esxcli system snmp set --enable true \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5 /etc/init.d/snmpd start \u78ba\u8a8d \u4ed6\u306e\u6a5f\u5668\u304b\u3089 snmpwalk -v 2c -c public 192.168.0.10 . \u5099\u8003 \u3010\u4efb\u610f\u3011\u7279\u5b9a\u306eSNMP \u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3060\u3051\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u5834\u5408 esxcli system snmp set --targets \u3010SNMP \u30de\u30cd\u30fc\u30b8\u30e3\u306eIP\u30a2\u30c9\u30ec\u30b9 or \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3011 \u3010\u4e0d\u8981\uff1f\u3011 firewall \u306bsnmp \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002 esxcli network firewall ruleset set --ruleset-id=snmp --allowed-all true \u3010\u4e0d\u8981\uff1f\u3011\u30eb\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002 esxcli network firewall ruleset set --ruleset-id=snmp --enabled true \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi snmp \u8a2d\u5b9a"},{"location":"esxi-snmp/#esxi-snmp","text":"","title":"ESXi snmp \u8a2d\u5b9a"},{"location":"esxi-snmp/#_1","text":"esxcli system snmp get","title":"\u78ba\u8a8d"},{"location":"esxi-snmp/#_2","text":"","title":"\u5fc5\u9808"},{"location":"esxi-snmp/#_3","text":"esxcli system snmp set --communities public","title":"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306e\u6307\u5b9a"},{"location":"esxi-snmp/#_4","text":"esxcli system snmp set --enable true","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u5316"},{"location":"esxi-snmp/#_5","text":"/etc/init.d/snmpd start","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5"},{"location":"esxi-snmp/#_6","text":"\u4ed6\u306e\u6a5f\u5668\u304b\u3089 snmpwalk -v 2c -c public 192.168.0.10 .","title":"\u78ba\u8a8d"},{"location":"esxi-snmp/#_7","text":"","title":"\u5099\u8003"},{"location":"esxi-snmp/#snmp","text":"esxcli system snmp set --targets \u3010SNMP \u30de\u30cd\u30fc\u30b8\u30e3\u306eIP\u30a2\u30c9\u30ec\u30b9 or \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3011","title":"\u3010\u4efb\u610f\u3011\u7279\u5b9a\u306eSNMP \u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3060\u3051\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u5834\u5408"},{"location":"esxi-snmp/#firewall-snmp","text":"esxcli network firewall ruleset set --ruleset-id=snmp --allowed-all true","title":"\u3010\u4e0d\u8981\uff1f\u3011 firewall \u306bsnmp \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002"},{"location":"esxi-snmp/#_8","text":"esxcli network firewall ruleset set --ruleset-id=snmp --enabled true","title":"\u3010\u4e0d\u8981\uff1f\u3011\u30eb\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002"},{"location":"esxi-snmp/#_9","text":"","title":"\u53c2\u8003"},{"location":"esxi-snmp/#_10","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"firewalld/","text":"firewalld\u30e1\u30e2 \u78ba\u8a8d \u72b6\u614b\u78ba\u8a8d firewall-cmd --state \u3059\u3079\u3066\u306e\u30be\u30fc\u30f3\u78ba\u8a8d firewall-cmd --list-all \u7279\u5b9a\u306e\u30be\u30fc\u30f3\u3092\u78ba\u8a8d firewall-cmd --list-all --zone=\u30be\u30fc\u30f3\u540d \u30b5\u30fc\u30d3\u30b9\u540d\u4e00\u89a7 firewall-cmd --get-services \u30b5\u30fc\u30d3\u30b9\u540d\u3067\u306e\u78ba\u8a8d firewall-cmd --info-service=pop3 \u8a2d\u5b9a \u8ffd\u52a0 firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --add-service=\u30b5\u30fc\u30d3\u30b9\u540d -permanent firewall-cmd --zone=public --add-service=pop3 --permanent \u30dd\u30fc\u30c8\u8ffd\u52a0 firewall-cmd --add-port=10000/tcp --zone=public --permanent \u524a\u9664 firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d --permanent firewall-cmd --zone=public --remove-service=pop3 \u30dd\u30fc\u30c8\u524a\u9664 firewall-cmd --remove-port=10000/tcp --zone=public --permanent \u53cd\u6620 firewall-cmd --reload \u7279\u5b9a\u306eIP\u3060\u3051\u8a31\u53ef(\u30ea\u30c3\u30c1\u30eb\u30fc\u30eb) \u30b5\u30fc\u30d3\u30b9\u3092\u30be\u30fc\u30f3\u304b\u3089\u524a\u9664 firewall-cmd --permanent --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d \u8a31\u53ef\u3057\u305fIP\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a firewall-cmd --permanent --zone=\u30be\u30fc\u30f3\u540d --add-rich-rule=\"rule family=\"ipv4\" source address=\"\u8a31\u53ef\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\" port protocol=\"tcp\" port=\"\u30dd\u30fc\u30c8\u756a\u53f7\" accept\" firewall-cmd --permanent --zone=public --add-rich-rule=\"rule family=\"ipv4\" source address=\"27.94.240.161/32\" port protocol=\"tcp\" port=\"2222\" accept\" \u5e83\u544a Amazon.co.jp: \u6a19\u6e96\u30c6\u30ad\u30b9\u30c8 CentOS 8 \u69cb\u7bc9\u30fb\u904b\u7528\u30fb\u7ba1\u7406\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30ac\u30a4\u30c9 : Kindle\u30b9\u30c8\u30a2 Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"firewalld\u30e1\u30e2"},{"location":"firewalld/#firewalld","text":"","title":"firewalld\u30e1\u30e2"},{"location":"firewalld/#_1","text":"","title":"\u78ba\u8a8d"},{"location":"firewalld/#_2","text":"firewall-cmd --state","title":"\u72b6\u614b\u78ba\u8a8d"},{"location":"firewalld/#_3","text":"firewall-cmd --list-all","title":"\u3059\u3079\u3066\u306e\u30be\u30fc\u30f3\u78ba\u8a8d"},{"location":"firewalld/#_4","text":"firewall-cmd --list-all --zone=\u30be\u30fc\u30f3\u540d","title":"\u7279\u5b9a\u306e\u30be\u30fc\u30f3\u3092\u78ba\u8a8d"},{"location":"firewalld/#_5","text":"firewall-cmd --get-services","title":"\u30b5\u30fc\u30d3\u30b9\u540d\u4e00\u89a7"},{"location":"firewalld/#_6","text":"firewall-cmd --info-service=pop3","title":"\u30b5\u30fc\u30d3\u30b9\u540d\u3067\u306e\u78ba\u8a8d"},{"location":"firewalld/#_7","text":"","title":"\u8a2d\u5b9a"},{"location":"firewalld/#_8","text":"firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --add-service=\u30b5\u30fc\u30d3\u30b9\u540d -permanent firewall-cmd --zone=public --add-service=pop3 --permanent","title":"\u8ffd\u52a0"},{"location":"firewalld/#_9","text":"firewall-cmd --add-port=10000/tcp --zone=public --permanent","title":"\u30dd\u30fc\u30c8\u8ffd\u52a0"},{"location":"firewalld/#_10","text":"firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d --permanent firewall-cmd --zone=public --remove-service=pop3","title":"\u524a\u9664"},{"location":"firewalld/#_11","text":"firewall-cmd --remove-port=10000/tcp --zone=public --permanent","title":"\u30dd\u30fc\u30c8\u524a\u9664"},{"location":"firewalld/#_12","text":"firewall-cmd --reload","title":"\u53cd\u6620"},{"location":"firewalld/#ip","text":"","title":"\u7279\u5b9a\u306eIP\u3060\u3051\u8a31\u53ef(\u30ea\u30c3\u30c1\u30eb\u30fc\u30eb)"},{"location":"firewalld/#_13","text":"firewall-cmd --permanent --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u30be\u30fc\u30f3\u304b\u3089\u524a\u9664"},{"location":"firewalld/#ip_1","text":"firewall-cmd --permanent --zone=\u30be\u30fc\u30f3\u540d --add-rich-rule=\"rule family=\"ipv4\" source address=\"\u8a31\u53ef\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\" port protocol=\"tcp\" port=\"\u30dd\u30fc\u30c8\u756a\u53f7\" accept\" firewall-cmd --permanent --zone=public --add-rich-rule=\"rule family=\"ipv4\" source address=\"27.94.240.161/32\" port protocol=\"tcp\" port=\"2222\" accept\"","title":"\u8a31\u53ef\u3057\u305fIP\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a"},{"location":"firewalld/#_14","text":"Amazon.co.jp: \u6a19\u6e96\u30c6\u30ad\u30b9\u30c8 CentOS 8 \u69cb\u7bc9\u30fb\u904b\u7528\u30fb\u7ba1\u7406\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30ac\u30a4\u30c9 : Kindle\u30b9\u30c8\u30a2 Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"ip-change-1/","text":"IP\u5909\u66f4 (ip,ifconfig) \u8a2d\u5b9a IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4 ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0 IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4 /etc/sysconfig/network-scripts \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1 \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (ip,ifconfig)"},{"location":"ip-change-1/#ip-ipifconfig","text":"","title":"IP\u5909\u66f4 (ip,ifconfig)"},{"location":"ip-change-1/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"ip-change-1/#ip","text":"ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0","title":"IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4"},{"location":"ip-change-1/#ip_1","text":"/etc/sysconfig/network-scripts \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1","title":"IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4"},{"location":"ip-change-1/#_2","text":"","title":"\u53c2\u8003"},{"location":"ip-change-1/#_3","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"ip-change-2/","text":"IP\u5909\u66f4 (netplan,ubuntu) \u8a2d\u5b9a /etc/netplan \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b cd /etc/netplan \u30d5\u30a1\u30a4\u30eb\u7de8\u96c6 vi 00-installer-config.yaml \u5185\u5bb9 network: ethernets: ens34: addresses: - 192.168.0.10/24 nameservers: addresses: - 8.8.8.8 search: [] routes: - to: default via: 192.168.0.1 version: 2 \u53cd\u6620 netplan apply \u53c2\u8003 \u5143\u30d5\u30a1\u30a4\u30eb(DHCP) cat /etc/netplan/00-installer-config.yaml.bak #This is the network config written by 'subiquity' network: ethernets: ens34: dhcp4: true version: 2 \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (netplan,ubuntu)"},{"location":"ip-change-2/#ip-netplanubuntu","text":"","title":"IP\u5909\u66f4 (netplan,ubuntu)"},{"location":"ip-change-2/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"ip-change-2/#etcnetplan","text":"cd /etc/netplan","title":"/etc/netplan \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b"},{"location":"ip-change-2/#_2","text":"vi 00-installer-config.yaml","title":"\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6"},{"location":"ip-change-2/#_3","text":"network: ethernets: ens34: addresses: - 192.168.0.10/24 nameservers: addresses: - 8.8.8.8 search: [] routes: - to: default via: 192.168.0.1 version: 2","title":"\u5185\u5bb9"},{"location":"ip-change-2/#_4","text":"netplan apply","title":"\u53cd\u6620"},{"location":"ip-change-2/#dhcp","text":"cat /etc/netplan/00-installer-config.yaml.bak #This is the network config written by 'subiquity' network: ethernets: ens34: dhcp4: true version: 2","title":"\u53c2\u8003 \u5143\u30d5\u30a1\u30a4\u30eb(DHCP)"},{"location":"ip-change-2/#_5","text":"","title":"\u53c2\u8003"},{"location":"ip-change-2/#_6","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"ip-change-3/","text":"IP\u5909\u66f4 (nmcli) nmcli \u30b3\u30de\u30f3\u30c9 \u8a2d\u5b9a\u540d\u78ba\u8a8d nmcli c \u51fa\u529b\u4f8b NAME UUID TYPE DEVICE ens192 b7d983f9-769e-40a9-80ad-29879584ed9d ethernet ens192 \u3000\u3000\u2191ens192\u3092\u8a2d\u5b9a\u3059\u308b IP\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a nmcli c mod ens192 ipv4.method manual ipv4.addresses 192.168.0.50/24 connection.autoconnect yes \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a nmcli c mod ens192 ipv4.gateway 192.168.0.254 DNS \u8a2d\u5b9a nmcli c mod ens192 +ipv4.dns 192.168.0.254 \u78ba\u8a8d ip a \u51fa\u529b\u4f8b 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:00:11:11:22:22 brd ff:ff:ff:ff:ff:ff altname enp3s0 inet 192.168.0.50/24 brd 192.168.0.255 scope global noprefixroute ens160 valid_lft forever preferred_lft forever \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (nmcli)"},{"location":"ip-change-3/#ip-nmcli","text":"","title":"IP\u5909\u66f4 (nmcli)"},{"location":"ip-change-3/#nmcli","text":"","title":"nmcli \u30b3\u30de\u30f3\u30c9"},{"location":"ip-change-3/#_1","text":"nmcli c \u51fa\u529b\u4f8b NAME UUID TYPE DEVICE ens192 b7d983f9-769e-40a9-80ad-29879584ed9d ethernet ens192 \u3000\u3000\u2191ens192\u3092\u8a2d\u5b9a\u3059\u308b","title":"\u8a2d\u5b9a\u540d\u78ba\u8a8d"},{"location":"ip-change-3/#ip","text":"nmcli c mod ens192 ipv4.method manual ipv4.addresses 192.168.0.50/24 connection.autoconnect yes","title":"IP\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a"},{"location":"ip-change-3/#_2","text":"nmcli c mod ens192 ipv4.gateway 192.168.0.254","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a"},{"location":"ip-change-3/#dns","text":"nmcli c mod ens192 +ipv4.dns 192.168.0.254","title":"DNS \u8a2d\u5b9a"},{"location":"ip-change-3/#_3","text":"ip a \u51fa\u529b\u4f8b 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:00:11:11:22:22 brd ff:ff:ff:ff:ff:ff altname enp3s0 inet 192.168.0.50/24 brd 192.168.0.255 scope global noprefixroute ens160 valid_lft forever preferred_lft forever","title":"\u78ba\u8a8d"},{"location":"ip-change-3/#_4","text":"","title":"\u53c2\u8003"},{"location":"ip-change-3/#_5","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"mkdocs/","text":"Welcome to MkDocs offical documents For full documentation visit mkdocs.org . mkdocs-material . mkdocs install pip pip install --upgrade pip pip install mkdocs pip install mkdocs-material pip freeze | grep mkdocs mkdocs new mkdocs new test ll cd test/ ll vi mkdocs.yml site_name: memo blog ##Basic Configuration theme: name: material palette: primary: pink mkdocs build mkdocs build mkdocs serve mkdocs serve -a 192.168.10.10:8000 Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"mkdocs/#welcome-to-mkdocs","text":"","title":"Welcome to MkDocs"},{"location":"mkdocs/#offical-documents","text":"","title":"offical documents"},{"location":"mkdocs/#for-full-documentation-visit","text":"mkdocs.org . mkdocs-material .","title":"For full documentation visit"},{"location":"mkdocs/#mkdocs-install","text":"","title":"mkdocs install"},{"location":"mkdocs/#pip","text":"pip install --upgrade pip pip install mkdocs pip install mkdocs-material pip freeze | grep mkdocs","title":"pip"},{"location":"mkdocs/#mkdocs-new","text":"mkdocs new test ll cd test/ ll vi mkdocs.yml site_name: memo blog ##Basic Configuration theme: name: material palette: primary: pink","title":"mkdocs new"},{"location":"mkdocs/#mkdocs-build","text":"mkdocs build mkdocs serve mkdocs serve -a 192.168.10.10:8000","title":"mkdocs build"},{"location":"mkdocs/#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"mkdocs/#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"raspi-co2/","text":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b \u6982\u8981 \u30e9\u30ba\u30d1\u30a4\u306bCO2\u30bb\u30f3\u30b5\u30fc mh_z19 \u3067\u4e8c\u9178\u5316\u70ad\u7d20\u3092\u6e2c\u5b9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3001prometheus\u3067\u30b0\u30e9\u30d5\u5316\u3059\u308b\u3002 \u30e9\u30ba\u30d1\u30a4\u8a2d\u5b9a \u30b7\u30ea\u30a2\u30eb\u8a2d\u5b9a root\u3067\u4f5c\u696d sudo su - raspi-config 3 Interface Options \u3000I1 SSH Enable/disable remote command line access using SSH I2 VNC Enable/disable graphical remote desktop access I3 SPI Enable/disable automatic loading of SPI kernel module I4 I2C Enable/disable automatic loading of I2C kernel module \u2606I5 Serial Port Enable/disable shell messages on the serial connection I6 1-Wire Enable/disable one-wire interface I7 Remote GPIO Enable/disable remote access to GPIO pins Would you like a login shell to be accessible over serial? \u3067\u300c\u3044\u3044\u3048\u300d\u3092\u9078\u629e\u3059\u308b Would you like the serial port hardware to be enabled? \u3067\u300c\u306f\u3044\u300d\u3092\u9078\u629e\u3059\u308b \u518d\u8d77\u52d5 reboot pip install sudo su - apt update apt upgrade apt install python3-pip pip3 install --break-system-packages --user mh_z19 python -m mh_z19 CO2\u30bb\u30f3\u30b5\u30fc mh_z19\u63a5\u7d9a \u4e8c\u9178\u5316\u70ad\u7d20\u304c\u3068\u308c\u308b root@raspberrypi:~# python -m mh_z19 {\"co2\": 593} root@raspberrypi:~# \u6e29\u5ea6\u3082\u3068\u308c\u308b\u3063\u307d\u3044 root@raspberrypi:~# python -m mh_z19 --all {\"co2\": 402, \"temperature\": 26, \"TT\": 66, \"SS\": 0, \"UhUl\": 13568} root@raspberrypi:~# node-exporter \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb text collect \u3092\u4f7f\u3046\u306e\u3067 prometheus-node-exporter-collectors \u3092 apt install apt install prometheus-node-exporter-collectors node-exporter \u3067\u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5834\u6240 ls -l /var/lib/prometheus/node-exporter/ \u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e \u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210 vi collect-co2.sh \u5185\u5bb9 #!/bin/bash ### file path ### PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=${PRM_PATH}/mh_z19.prom.tmp PRM_FILE=${PRM_PATH}/mh_z19.prom ### collect co2 value ### i=0 while [ $i -le 10 ] do sleep 1 VALUE=`python -m mh_z19 | jq .[]` if [ -z $VALUE ]; then ((i++)) echo \"co2 value is null. retry $i\" else echo \"co2 value is $VALUE\" break fi done ### put prom file ### echo \"mh_z19_co2 $VALUE\" > $TMP_FILE echo \"mh_z19_co2_retry $i\" >> $TMP_FILE mv $TMP_FILE $PRM_FILE exit \u52d5\u4f5c\u78ba\u8a8d chmod 755 collect-co2.sh ./collect-co2.sh \u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/mh_z19.prom \u51fa\u529b\u4f8b mh_z19_co2 713 mh_z19_co2_retry 0 crontab crontab -e \u8ffd\u52a0\u3059\u308b ### raspi-co2-exporter ### * * * * * /root/collect-co2.sh prometheus \u8a2d\u5b9a prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b - job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605 grafana \u8a2d\u5b9a grafana-co2.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b \u53c2\u8003 https://github.com/UedaTakeyuki/mh-z19 \u5e83\u544a Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b"},{"location":"raspi-co2/#co2","text":"","title":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b"},{"location":"raspi-co2/#_1","text":"\u30e9\u30ba\u30d1\u30a4\u306bCO2\u30bb\u30f3\u30b5\u30fc mh_z19 \u3067\u4e8c\u9178\u5316\u70ad\u7d20\u3092\u6e2c\u5b9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3001prometheus\u3067\u30b0\u30e9\u30d5\u5316\u3059\u308b\u3002","title":"\u6982\u8981"},{"location":"raspi-co2/#_2","text":"","title":"\u30e9\u30ba\u30d1\u30a4\u8a2d\u5b9a"},{"location":"raspi-co2/#_3","text":"root\u3067\u4f5c\u696d sudo su - raspi-config 3 Interface Options \u3000I1 SSH Enable/disable remote command line access using SSH I2 VNC Enable/disable graphical remote desktop access I3 SPI Enable/disable automatic loading of SPI kernel module I4 I2C Enable/disable automatic loading of I2C kernel module \u2606I5 Serial Port Enable/disable shell messages on the serial connection I6 1-Wire Enable/disable one-wire interface I7 Remote GPIO Enable/disable remote access to GPIO pins Would you like a login shell to be accessible over serial? \u3067\u300c\u3044\u3044\u3048\u300d\u3092\u9078\u629e\u3059\u308b Would you like the serial port hardware to be enabled? \u3067\u300c\u306f\u3044\u300d\u3092\u9078\u629e\u3059\u308b","title":"\u30b7\u30ea\u30a2\u30eb\u8a2d\u5b9a"},{"location":"raspi-co2/#_4","text":"reboot","title":"\u518d\u8d77\u52d5"},{"location":"raspi-co2/#pip-install","text":"sudo su - apt update apt upgrade apt install python3-pip pip3 install --break-system-packages --user mh_z19 python -m mh_z19","title":"pip install"},{"location":"raspi-co2/#co2-mh_z19","text":"","title":"CO2\u30bb\u30f3\u30b5\u30fc mh_z19\u63a5\u7d9a"},{"location":"raspi-co2/#_5","text":"root@raspberrypi:~# python -m mh_z19 {\"co2\": 593} root@raspberrypi:~#","title":"\u4e8c\u9178\u5316\u70ad\u7d20\u304c\u3068\u308c\u308b"},{"location":"raspi-co2/#_6","text":"root@raspberrypi:~# python -m mh_z19 --all {\"co2\": 402, \"temperature\": 26, \"TT\": 66, \"SS\": 0, \"UhUl\": 13568} root@raspberrypi:~#","title":"\u6e29\u5ea6\u3082\u3068\u308c\u308b\u3063\u307d\u3044"},{"location":"raspi-co2/#node-exporter","text":"","title":"node-exporter \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"raspi-co2/#text-collect-prometheus-node-exporter-collectors-apt-install","text":"apt install prometheus-node-exporter-collectors","title":"text collect \u3092\u4f7f\u3046\u306e\u3067 prometheus-node-exporter-collectors \u3092 apt install"},{"location":"raspi-co2/#node-exporter_1","text":"ls -l /var/lib/prometheus/node-exporter/","title":"node-exporter \u3067\u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5834\u6240"},{"location":"raspi-co2/#_7","text":"","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e"},{"location":"raspi-co2/#_8","text":"vi collect-co2.sh \u5185\u5bb9 #!/bin/bash ### file path ### PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=${PRM_PATH}/mh_z19.prom.tmp PRM_FILE=${PRM_PATH}/mh_z19.prom ### collect co2 value ### i=0 while [ $i -le 10 ] do sleep 1 VALUE=`python -m mh_z19 | jq .[]` if [ -z $VALUE ]; then ((i++)) echo \"co2 value is null. retry $i\" else echo \"co2 value is $VALUE\" break fi done ### put prom file ### echo \"mh_z19_co2 $VALUE\" > $TMP_FILE echo \"mh_z19_co2_retry $i\" >> $TMP_FILE mv $TMP_FILE $PRM_FILE exit","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210"},{"location":"raspi-co2/#_9","text":"chmod 755 collect-co2.sh ./collect-co2.sh","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"raspi-co2/#_10","text":"ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/mh_z19.prom \u51fa\u529b\u4f8b mh_z19_co2 713 mh_z19_co2_retry 0","title":"\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d"},{"location":"raspi-co2/#crontab","text":"crontab -e \u8ffd\u52a0\u3059\u308b ### raspi-co2-exporter ### * * * * * /root/collect-co2.sh","title":"crontab"},{"location":"raspi-co2/#prometheus","text":"","title":"prometheus \u8a2d\u5b9a"},{"location":"raspi-co2/#prometheusyaml","text":"- job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605","title":"prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b"},{"location":"raspi-co2/#grafana","text":"","title":"grafana \u8a2d\u5b9a"},{"location":"raspi-co2/#grafana-co2json","text":"","title":"grafana-co2.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b"},{"location":"raspi-co2/#_11","text":"https://github.com/UedaTakeyuki/mh-z19","title":"\u53c2\u8003"},{"location":"raspi-co2/#_12","text":"Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"tinkerforge-exporter/","text":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b \u6982\u8981 \u30e9\u30ba\u30d1\u30a4\u306btinkerforge\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u3002 \u30e9\u30ba\u30d1\u30a4\u306b\u4ee5\u4e0b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb node-exporter (text collecter) tinkerforge brickd tinkerforge shell bindings bc install node-exporter apt install prometheus-node-exporter-collectors tinkerforge brickd wget https://download.tinkerforge.com/tools/brickd/linux/brickd_linux_latest_armhf.deb dpkg -i brickd_linux_latest_armhf.deb tinkerforge shell bindings mkdir tinkerforge cd tinkerforge wget https://download.tinkerforge.com/bindings/shell/tinkerforge_shell_bindings_latest.zip unzip tinkerforge_shell_bindings_latest.zip bc apt install bc \u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e \u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210 vi get-tinkerforge.sh \u5185\u5bb9 #!/bin/bash TF_PATH=/root/tinkerforge TF_CALL=\"${TF_PATH}/tinkerforge call\" PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=$PRM_PATH/tinkerforge.prom.tmp PRM_FILE=$PRM_PATH/tinkerforge.prom ### target sensors ### air_quality_bricklet=\"\" temperature_bricklet=\"\" humidity_bricklet=\"\" ambient_light_v2_bricklet=\"\" dust_detector_bricklet=\"\" ### start echo \"# tinkerfoge sensor values\" | tee $TMP_FILE ### air-quality-bricklet ### if [[ $air_quality_bricklet = \"\" ]] ; then echo \"air-quality-bricklet is n/a\" else TFID=\"$air_quality_bricklet\" #temperture OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #humidity OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #air-pressure OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-air-pressure` #ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` ITEM=tinkerforge_air_pressure VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### temperature-bricklet ### if [[ $temperature_bricklet = \"\" ]] ; then echo \"temperature-bricklet is n/a\" else TFID=$temperature_bricklet OUTPUT=`$TF_CALL temperature-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### humidity-bricklet ### if [[ $humidity_bricklet = \"\" ]] ; then echo \"humidity-bricklet is n/a\" else TFID=$humidity_bricklet OUTPUT=`$TF_CALL humidity-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### ambient-light-v2-bricklet ### if [[ $ambient_light_v2_bricklet = \"\" ]] ; then echo \"ambient-light-v2-bricklet is n/a\" else TFID=$ambient_light_v2_bricklet OUTPUT=`$TF_CALL ambient-light-v2-bricklet $TFID get-illuminance` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### dust-detector-bricklet ### if [[ $dust_detector_bricklet = \"\" ]] ; then echo \"dust-detector-bricklet is n/a\" else TFID=$dust_detector_bricklet OUTPUT=`$TF_CALL dust-detector-bricklet $TFID get-dust-density` ITEM=tinkerforge_dust_density VALUE=`echo $OUTPUT | cut -d\"=\" -f2` echo $ITEM $VALUE | tee -a $TMP_FILE fi mv $TMP_FILE $PRM_FILE \u52d5\u4f5c\u78ba\u8a8d chmod 755 get-tinkerforge.sh ./get-tinkerforge.sh \u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/tinkerforge.prom \u51fa\u529b\u4f8b tinkerforge_temperature 23.31 tinkerforge_humidity 36.57 tinkerforge_air_pressure 1014.67 tinkerforge_illuminance 61.47 tinkerforge_dust_density 25 crontab crontab -e ### tinkerforge-exporter ### * * * * * /root/tinkerforge/get-tinkerforge.sh prometheus \u8a2d\u5b9a prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b - job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605 grafana \u8a2d\u5b9a grafana-tinkerforge.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b \u53c2\u8003 https://github.com/tkhskh/tinkerforge-expoter \u5e83\u544a Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b"},{"location":"tinkerforge-exporter/#tinkerforge","text":"","title":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b"},{"location":"tinkerforge-exporter/#_1","text":"\u30e9\u30ba\u30d1\u30a4\u306btinkerforge\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u3002","title":"\u6982\u8981"},{"location":"tinkerforge-exporter/#_2","text":"node-exporter (text collecter) tinkerforge brickd tinkerforge shell bindings bc","title":"\u30e9\u30ba\u30d1\u30a4\u306b\u4ee5\u4e0b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"tinkerforge-exporter/#install","text":"","title":"install"},{"location":"tinkerforge-exporter/#node-exporter","text":"apt install prometheus-node-exporter-collectors","title":"node-exporter"},{"location":"tinkerforge-exporter/#tinkerforge-brickd","text":"wget https://download.tinkerforge.com/tools/brickd/linux/brickd_linux_latest_armhf.deb dpkg -i brickd_linux_latest_armhf.deb","title":"tinkerforge brickd"},{"location":"tinkerforge-exporter/#tinkerforge-shell-bindings","text":"mkdir tinkerforge cd tinkerforge wget https://download.tinkerforge.com/bindings/shell/tinkerforge_shell_bindings_latest.zip unzip tinkerforge_shell_bindings_latest.zip","title":"tinkerforge shell bindings"},{"location":"tinkerforge-exporter/#bc","text":"apt install bc","title":"bc"},{"location":"tinkerforge-exporter/#_3","text":"","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e"},{"location":"tinkerforge-exporter/#_4","text":"vi get-tinkerforge.sh \u5185\u5bb9 #!/bin/bash TF_PATH=/root/tinkerforge TF_CALL=\"${TF_PATH}/tinkerforge call\" PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=$PRM_PATH/tinkerforge.prom.tmp PRM_FILE=$PRM_PATH/tinkerforge.prom ### target sensors ### air_quality_bricklet=\"\" temperature_bricklet=\"\" humidity_bricklet=\"\" ambient_light_v2_bricklet=\"\" dust_detector_bricklet=\"\" ### start echo \"# tinkerfoge sensor values\" | tee $TMP_FILE ### air-quality-bricklet ### if [[ $air_quality_bricklet = \"\" ]] ; then echo \"air-quality-bricklet is n/a\" else TFID=\"$air_quality_bricklet\" #temperture OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #humidity OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #air-pressure OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-air-pressure` #ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` ITEM=tinkerforge_air_pressure VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### temperature-bricklet ### if [[ $temperature_bricklet = \"\" ]] ; then echo \"temperature-bricklet is n/a\" else TFID=$temperature_bricklet OUTPUT=`$TF_CALL temperature-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### humidity-bricklet ### if [[ $humidity_bricklet = \"\" ]] ; then echo \"humidity-bricklet is n/a\" else TFID=$humidity_bricklet OUTPUT=`$TF_CALL humidity-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### ambient-light-v2-bricklet ### if [[ $ambient_light_v2_bricklet = \"\" ]] ; then echo \"ambient-light-v2-bricklet is n/a\" else TFID=$ambient_light_v2_bricklet OUTPUT=`$TF_CALL ambient-light-v2-bricklet $TFID get-illuminance` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### dust-detector-bricklet ### if [[ $dust_detector_bricklet = \"\" ]] ; then echo \"dust-detector-bricklet is n/a\" else TFID=$dust_detector_bricklet OUTPUT=`$TF_CALL dust-detector-bricklet $TFID get-dust-density` ITEM=tinkerforge_dust_density VALUE=`echo $OUTPUT | cut -d\"=\" -f2` echo $ITEM $VALUE | tee -a $TMP_FILE fi mv $TMP_FILE $PRM_FILE","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210"},{"location":"tinkerforge-exporter/#_5","text":"chmod 755 get-tinkerforge.sh ./get-tinkerforge.sh","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"tinkerforge-exporter/#_6","text":"ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/tinkerforge.prom \u51fa\u529b\u4f8b tinkerforge_temperature 23.31 tinkerforge_humidity 36.57 tinkerforge_air_pressure 1014.67 tinkerforge_illuminance 61.47 tinkerforge_dust_density 25","title":"\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d"},{"location":"tinkerforge-exporter/#crontab","text":"crontab -e ### tinkerforge-exporter ### * * * * * /root/tinkerforge/get-tinkerforge.sh","title":"crontab"},{"location":"tinkerforge-exporter/#prometheus","text":"","title":"prometheus \u8a2d\u5b9a"},{"location":"tinkerforge-exporter/#prometheusyaml","text":"- job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605","title":"prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b"},{"location":"tinkerforge-exporter/#grafana","text":"","title":"grafana \u8a2d\u5b9a"},{"location":"tinkerforge-exporter/#grafana-tinkerforgejson","text":"","title":"grafana-tinkerforge.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b"},{"location":"tinkerforge-exporter/#_7","text":"https://github.com/tkhskh/tinkerforge-expoter","title":"\u53c2\u8003"},{"location":"tinkerforge-exporter/#_8","text":"Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"zabbix-vmware/","text":"ZABBIX\u69cb\u7bc9 VMware\u7248 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 https://www.zabbix.com/jp/download_appliance vmdk\u306f\u5909\u63db\u5fc5\u8981\u3060\u3063\u305f vmkfstools -i zabbix-disk1.vmdk.org -d thin zabbix-disk1.vmdk IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4 ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0 IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4 vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1 update dnf update vmtools\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb dnf install open-vm-tools systemctl enable vmtoolsd systemctl start vmtoolsd systemctl status vmtoolsd \u30e1\u30e2 systemctl list-unit-files -t service \u65e5\u672c\u8a9e\u5316 dnf install zabbix-web-japanese GUI http://192.168.0.1 \u30e6\u30fc\u30b6\uff1aAdmin \u30d1\u30b9\u30ef\u30fc\u30c9\uff1azabbix User setting \u30bf\u30a4\u30e0\u30be\u30fc\u30f3 \u8a00\u8a9e \u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b \u5e83\u544a Amazon.co.jp: \uff3b\u6539\u8a023\u7248\uff3dZabbix\u7d71\u5408\u76e3\u8996\u5b9f\u8df5\u5165\u9580: Kindle\u30b9\u30c8\u30a2 \u30e1\u30eb\u30ab\u30ea\uff1a\u3000Zabbix \u7d71\u5408\u76e3\u8996 \uff1a \u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"ZABBIX\u69cb\u7bc9 VMware\u7248"},{"location":"zabbix-vmware/#zabbix-vmware","text":"","title":"ZABBIX\u69cb\u7bc9 VMware\u7248"},{"location":"zabbix-vmware/#_1","text":"https://www.zabbix.com/jp/download_appliance","title":"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"},{"location":"zabbix-vmware/#vmdk","text":"vmkfstools -i zabbix-disk1.vmdk.org -d thin zabbix-disk1.vmdk","title":"vmdk\u306f\u5909\u63db\u5fc5\u8981\u3060\u3063\u305f"},{"location":"zabbix-vmware/#ip","text":"ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0","title":"IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4"},{"location":"zabbix-vmware/#ip_1","text":"vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1","title":"IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4"},{"location":"zabbix-vmware/#update","text":"dnf update","title":"update"},{"location":"zabbix-vmware/#vmtools","text":"dnf install open-vm-tools systemctl enable vmtoolsd systemctl start vmtoolsd systemctl status vmtoolsd \u30e1\u30e2 systemctl list-unit-files -t service","title":"vmtools\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"zabbix-vmware/#_2","text":"dnf install zabbix-web-japanese","title":"\u65e5\u672c\u8a9e\u5316"},{"location":"zabbix-vmware/#gui","text":"http://192.168.0.1 \u30e6\u30fc\u30b6\uff1aAdmin \u30d1\u30b9\u30ef\u30fc\u30c9\uff1azabbix User setting \u30bf\u30a4\u30e0\u30be\u30fc\u30f3 \u8a00\u8a9e \u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b","title":"GUI"},{"location":"zabbix-vmware/#_3","text":"Amazon.co.jp: \uff3b\u6539\u8a023\u7248\uff3dZabbix\u7d71\u5408\u76e3\u8996\u5b9f\u8df5\u5165\u9580: Kindle\u30b9\u30c8\u30a2 \u30e1\u30eb\u30ab\u30ea\uff1a\u3000Zabbix \u7d71\u5408\u76e3\u8996 \uff1a \u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/","text":"index Linux IP change (ip,ifconfig) IP change (netplan) IP change (nmcli) firewalld setting raspberry pi co2 raspberry pi tinkerforge sensor ZABBIX (VMware) ESXi OS minimum install snmp setting snmp trap setting esxtop esxtop bat esxtop tips cpu core detail GUI timeout PowerCLI install (Windows) PowerCLI install (ubuntu PowerShell PowerCLI) PowerCLI install (ubuntu docker PowerCLI) MkDocs mkdocs","title":"index"},{"location":"en/#index","text":"","title":"index"},{"location":"en/#linux","text":"IP change (ip,ifconfig) IP change (netplan) IP change (nmcli) firewalld setting raspberry pi co2 raspberry pi tinkerforge sensor ZABBIX (VMware)","title":"Linux"},{"location":"en/#esxi","text":"OS minimum install snmp setting snmp trap setting esxtop esxtop bat esxtop tips cpu core detail GUI timeout PowerCLI install (Windows) PowerCLI install (ubuntu PowerShell PowerCLI) PowerCLI install (ubuntu docker PowerCLI)","title":"ESXi"},{"location":"en/#mkdocs","text":"mkdocs","title":"MkDocs"},{"location":"en/about/","text":"about \u3059\u3050\u5fd8\u308c\u3066\u3057\u307e\u3046\u306e\u3067 :octicons-heart-fill-24:{ .heart } :fontawesome-solid-heart: :fontawesome-regular-face-laugh-wink: Note \u3053\u308c\u306fNote\u3067\u3059\u3002 aaa Tip \u3053\u308c\u306fTip\u3067\u3059\u3002 Warning \u3053\u308c\u306fWarning\u3067\u3059 Danger \u3053\u308c\u306fDanger\u3067\u3059\u3002 Success \u3053\u308c\u306fSaccess\u3067\u3059\u3002 Failure \u3053\u308c\u306fFailure\u3067\u3059\u3002 Bug \u3053\u308c\u306fbug\u3067\u3059\u3002 Summary \u3053\u308c\u306fsummary\u3067\u3059\u3002 \u4eca\u3059\u3050\u8cfc\u5165 https://jp.mercari.com/search?afid=2799704686&keyword=rtx+3090","title":"about"},{"location":"en/about/#about","text":"","title":"about"},{"location":"en/about/#_1","text":"\u3059\u3050\u5fd8\u308c\u3066\u3057\u307e\u3046\u306e\u3067 :octicons-heart-fill-24:{ .heart } :fontawesome-solid-heart: :fontawesome-regular-face-laugh-wink: Note \u3053\u308c\u306fNote\u3067\u3059\u3002 aaa Tip \u3053\u308c\u306fTip\u3067\u3059\u3002 Warning \u3053\u308c\u306fWarning\u3067\u3059 Danger \u3053\u308c\u306fDanger\u3067\u3059\u3002 Success \u3053\u308c\u306fSaccess\u3067\u3059\u3002 Failure \u3053\u308c\u306fFailure\u3067\u3059\u3002 Bug \u3053\u308c\u306fbug\u3067\u3059\u3002 Summary \u3053\u308c\u306fsummary\u3067\u3059\u3002 \u4eca\u3059\u3050\u8cfc\u5165 https://jp.mercari.com/search?afid=2799704686&keyword=rtx+3090","title":""},{"location":"en/esxi-cpuList/","text":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b \u30b3\u30a2\u6570\u3092\u78ba\u8a8d vsish -e ls /hardware/cpu/cpuList/ \u51fa\u529b\u4f8b 0 1 2 3 \u5404\u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d vsish -e get /hardware/cpu/cpuList/0 \u51fa\u529b\u4f8b CPU information { Family:0x19 Model:0x08 Type:0x00 Stepping:0x02 TSC Hz:3593249536 Processor Hz:3593249208 Bus Hz:99812478 Name:AuthenticAMD CPUID:CPUID content { 0:CPUID leaf { EAX:0x00000010 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 1:CPUID leaf { EAX:0x00a00f82 EBX:0x00400800 ECX:0x7efa320b EDX:0x178bfbff } 80:CPUID leaf { EAX:0x80000023 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 81:CPUID leaf { EAX:0x00a00f82 EBX:0x40000000 ECX:0x75c237ff EDX:0x2fd3fbff } 88:CPUID leaf { EAX:0x00003030 EBX:0x91bef75f ECX:0x0000603f EDX:0x00010007 } 8a:CPUID leaf { EAX:0x00000001 EBX:0x00008000 ECX:0x00000000 EDX:0x119bbcff } } APIC ID:0x00000000 Core:0 Module:0 Tile:0 Die:0 Package:0 Node:0 Number of microcode updates:0 Original Revision:0x0a008204 Current Revision:0x0a008204 Cache information:CPU cache information { L1 cache size (bytes):32768 L1 cache associativity:8 L1 cache line size (bytes):64 Number of CPUs (threads) sharing the L1 cache:2 L2 cache size (bytes):524288 L2 cache associativity:8 L2 cache line size (bytes):64 Number of CPUs (threads) sharing the L2 cache:2 L3 cache size (bytes):33554432 L3 cache associativity:16 L3 cache line size (bytes):64 Number of CPUs (threads) sharing the L3 cache:16 L4 cache size (bytes):-1 L4 cache associativity:-1 L4 cache line size (bytes):-1 Number of CPUs (threads) sharing the L4 cache:-1 } } \u53c2\u8003 https://kb.vmware.com/s/article/81166 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b"},{"location":"en/esxi-cpuList/#esxi-cpu","text":"","title":"ESXi \u306eCPU\u3092\u78ba\u8a8d\u3059\u308b"},{"location":"en/esxi-cpuList/#_1","text":"vsish -e ls /hardware/cpu/cpuList/ \u51fa\u529b\u4f8b 0 1 2 3","title":"\u30b3\u30a2\u6570\u3092\u78ba\u8a8d"},{"location":"en/esxi-cpuList/#_2","text":"vsish -e get /hardware/cpu/cpuList/0 \u51fa\u529b\u4f8b CPU information { Family:0x19 Model:0x08 Type:0x00 Stepping:0x02 TSC Hz:3593249536 Processor Hz:3593249208 Bus Hz:99812478 Name:AuthenticAMD CPUID:CPUID content { 0:CPUID leaf { EAX:0x00000010 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 1:CPUID leaf { EAX:0x00a00f82 EBX:0x00400800 ECX:0x7efa320b EDX:0x178bfbff } 80:CPUID leaf { EAX:0x80000023 EBX:0x68747541 ECX:0x444d4163 EDX:0x69746e65 } 81:CPUID leaf { EAX:0x00a00f82 EBX:0x40000000 ECX:0x75c237ff EDX:0x2fd3fbff } 88:CPUID leaf { EAX:0x00003030 EBX:0x91bef75f ECX:0x0000603f EDX:0x00010007 } 8a:CPUID leaf { EAX:0x00000001 EBX:0x00008000 ECX:0x00000000 EDX:0x119bbcff } } APIC ID:0x00000000 Core:0 Module:0 Tile:0 Die:0 Package:0 Node:0 Number of microcode updates:0 Original Revision:0x0a008204 Current Revision:0x0a008204 Cache information:CPU cache information { L1 cache size (bytes):32768 L1 cache associativity:8 L1 cache line size (bytes):64 Number of CPUs (threads) sharing the L1 cache:2 L2 cache size (bytes):524288 L2 cache associativity:8 L2 cache line size (bytes):64 Number of CPUs (threads) sharing the L2 cache:2 L3 cache size (bytes):33554432 L3 cache associativity:16 L3 cache line size (bytes):64 Number of CPUs (threads) sharing the L3 cache:16 L4 cache size (bytes):-1 L4 cache associativity:-1 L4 cache line size (bytes):-1 Number of CPUs (threads) sharing the L4 cache:-1 } }","title":"\u5404\u30b3\u30a2\u306e\u8a73\u7d30\u3092\u78ba\u8a8d"},{"location":"en/esxi-cpuList/#_3","text":"https://kb.vmware.com/s/article/81166","title":"\u53c2\u8003"},{"location":"en/esxi-cpuList/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-esxtop-1/","text":"ESXi esxtop \u57fa\u790e \u5b9f\u884c esxtop h help Switch display: c:cpu i:interrupt m:memory n:network d:disk adapter u:disk device v:disk VM p:power mgmt r:rdma device x:vsan v VM disk 12:30:57pm up 10 days 16 min, 1372 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.04, 0.03, 0.03 GID VMNAME VDEVNAME NVDISK CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s LAT/rd LAT/wr 31037 ZABBIX648 - 1 12.55 0.00 12.55 0.00 0.12 0.000 0.066 32106 TrueNAS-S23 - 8 50.80 0.00 50.80 0.00 0.58 0.000 0.031 73726 PROMETHEUS - 1 0.97 0.00 0.97 0.00 0.02 0.000 0.043 V VM cpu 12:31:29pm up 10 days 17 min, 1371 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.03, 0.03, 0.03 PCPU USED(%): 0.7 0.1 0.3 0.5 0.1 2.4 0.6 118 2.7 0.1 1.8 0.9 0.7 0.6 0.2 0.6 NUMA: 2.4 AVG: 2.4 PCPU UTIL(%): 0.8 0.1 0.4 0.7 0.2 2.5 1.6 99 2.7 0.2 1.9 0.5 0.8 0.8 0.2 0.6 NUMA: 2.6 AVG: 2.6 CORE UTIL(%): 0.2 0.9 2.7 99 3.1 2.3 0.8 0.8 NUMA: 5.8 AVG: 5.8 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 89857 89857 ubuntu-docker 26 5.13 6.90 0.00 2600.00 4.99 0.41 1746.33 0.04 0.00 0.00 0.00 73740 73740 Miracle8 40 5.03 7.71 0.30 4000.00 0.00 0.40 3487.48 0.02 0.00 0.00 0.00 296587 296587 VMwareESXi8-1 40 4.90 7.18 0.18 4000.00 0.00 1.76 3586.38 0.04 0.00 0.00 0.00 c 12:23:58pm up 5 days 13:36, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PCPU USED(%): 0.1 0.3 0.0 0.0 0.2 0.2 0.3 0.0 55 0.2 0.1 0.0 0.2 0.0 0.1 0.0 NUMA: 3.6 AVG: 3.6 PCPU UTIL(%): 0.1 0.1 0.0 0.0 0.6 0.3 0.4 0.1 98 0.5 0.2 0.0 0.2 0.0 0.0 0.0 NUMA: 6.3 AVG: 6.3 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 337279 337279 esxtop.578480 1 38.69 73.75 0.00 1.05 - 0.01 0.00 0.00 0.00 0.00 0.00 1 1 system 388 0.32 1036.63 0.00 25120.24 - 69.35 0.00 0.48 0.00 0.00 0.00 337162 337162 sshd.578467 1 0.09 0.38 0.00 74.05 - 0.02 0.00 0.00 0.00 0.00 0.00 p power mgmt m 12:25:00pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; MEM overcommit avg: 0.00, 0.00, 0.00 PMEM /MB: 32766 total: 381 vmk,1314 other, 31070 free VMKMEM/MB: 32604 managed: 940 minfree, 5106 rsvd, 27498 ursvd, high state PSHARE/MB: 32 shared, 32 common: 0 saving SWAP /MB: 0 curr, 0 rclmtgt: 0.00 r/s, 0.00 w/s ZIP /MB: 0 zipped, 0 saved MEMCTL/MB: 0 curr, 0 target, 0 max GID NAME MEMSZ GRANT CNSM SZTGT TCHD TCHD_W SWCUR SWTGT SWR/s SWW/s LLSWR/s LLSWW/s OVHDUW OVHD OVHDMAX 13814 hostd.526366 105.12 71.26 76.59 83.72 31.10 25.77 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 17469 vpxa.526791 33.77 19.65 24.49 26.45 8.14 3.30 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1041 vmsyslogd.52455 26.04 14.14 15.07 16.49 10.29 9.35 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 n network 12:25:20pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PORT-ID USED-BY TEAM-PNIC DNAME PKTTX/s MbTX/s PSZTX PKTRX/s MbRX/s PSZRX %DRPTX %DRPRX 67108867 Management n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108869 Shadow of vmnic0 n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108870 vmk0 vmnic0 vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 2214592516 vmnic0 - vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 d disk adapter 12:27:54pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 ADAPTR PATH NPTH CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s DAVG/cmd KAVG/cmd GAVG/cmd QAVG/cmd vmhba0 - 2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba1 - 1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba2 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba64 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 d disk device r rdma device i interrupt 12:27:05pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 COOKIE COUNT/s TIME/int COUNT_0 COUNT_1 COUNT_2 COUNT_3 COUNT_4 COUNT_5 COUNT_6 COUNT_7 COUNT_8 COUNT_9 COUNT_10 COUNT_11 COUNT_12 COUNT_13 COUNT_14 COUNT_15 D 0x0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V 0x1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V x vsan \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u57fa\u790e"},{"location":"en/esxi-esxtop-1/#esxi-esxtop","text":"","title":"ESXi esxtop \u57fa\u790e"},{"location":"en/esxi-esxtop-1/#_1","text":"esxtop","title":"\u5b9f\u884c"},{"location":"en/esxi-esxtop-1/#h-help","text":"Switch display: c:cpu i:interrupt m:memory n:network d:disk adapter u:disk device v:disk VM p:power mgmt r:rdma device x:vsan","title":"h help"},{"location":"en/esxi-esxtop-1/#v-vm-disk","text":"12:30:57pm up 10 days 16 min, 1372 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.04, 0.03, 0.03 GID VMNAME VDEVNAME NVDISK CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s LAT/rd LAT/wr 31037 ZABBIX648 - 1 12.55 0.00 12.55 0.00 0.12 0.000 0.066 32106 TrueNAS-S23 - 8 50.80 0.00 50.80 0.00 0.58 0.000 0.031 73726 PROMETHEUS - 1 0.97 0.00 0.97 0.00 0.02 0.000 0.043","title":"v VM disk"},{"location":"en/esxi-esxtop-1/#v-vm-cpu","text":"12:31:29pm up 10 days 17 min, 1371 worlds, 14 VMs, 204 vCPUs; CPU load average: 0.03, 0.03, 0.03 PCPU USED(%): 0.7 0.1 0.3 0.5 0.1 2.4 0.6 118 2.7 0.1 1.8 0.9 0.7 0.6 0.2 0.6 NUMA: 2.4 AVG: 2.4 PCPU UTIL(%): 0.8 0.1 0.4 0.7 0.2 2.5 1.6 99 2.7 0.2 1.9 0.5 0.8 0.8 0.2 0.6 NUMA: 2.6 AVG: 2.6 CORE UTIL(%): 0.2 0.9 2.7 99 3.1 2.3 0.8 0.8 NUMA: 5.8 AVG: 5.8 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 89857 89857 ubuntu-docker 26 5.13 6.90 0.00 2600.00 4.99 0.41 1746.33 0.04 0.00 0.00 0.00 73740 73740 Miracle8 40 5.03 7.71 0.30 4000.00 0.00 0.40 3487.48 0.02 0.00 0.00 0.00 296587 296587 VMwareESXi8-1 40 4.90 7.18 0.18 4000.00 0.00 1.76 3586.38 0.04 0.00 0.00 0.00","title":"V VM cpu"},{"location":"en/esxi-esxtop-1/#c","text":"12:23:58pm up 5 days 13:36, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PCPU USED(%): 0.1 0.3 0.0 0.0 0.2 0.2 0.3 0.0 55 0.2 0.1 0.0 0.2 0.0 0.1 0.0 NUMA: 3.6 AVG: 3.6 PCPU UTIL(%): 0.1 0.1 0.0 0.0 0.6 0.3 0.4 0.1 98 0.5 0.2 0.0 0.2 0.0 0.0 0.0 NUMA: 6.3 AVG: 6.3 ID GID NAME NWLD %USED %RUN %SYS %WAIT %VMWAIT %RDY %IDLE %OVRLP %CSTP %MLMTD %SWPWT 337279 337279 esxtop.578480 1 38.69 73.75 0.00 1.05 - 0.01 0.00 0.00 0.00 0.00 0.00 1 1 system 388 0.32 1036.63 0.00 25120.24 - 69.35 0.00 0.48 0.00 0.00 0.00 337162 337162 sshd.578467 1 0.09 0.38 0.00 74.05 - 0.02 0.00 0.00 0.00 0.00 0.00","title":"c"},{"location":"en/esxi-esxtop-1/#p-power-mgmt","text":"","title":"p power mgmt"},{"location":"en/esxi-esxtop-1/#m","text":"12:25:00pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; MEM overcommit avg: 0.00, 0.00, 0.00 PMEM /MB: 32766 total: 381 vmk,1314 other, 31070 free VMKMEM/MB: 32604 managed: 940 minfree, 5106 rsvd, 27498 ursvd, high state PSHARE/MB: 32 shared, 32 common: 0 saving SWAP /MB: 0 curr, 0 rclmtgt: 0.00 r/s, 0.00 w/s ZIP /MB: 0 zipped, 0 saved MEMCTL/MB: 0 curr, 0 target, 0 max GID NAME MEMSZ GRANT CNSM SZTGT TCHD TCHD_W SWCUR SWTGT SWR/s SWW/s LLSWR/s LLSWW/s OVHDUW OVHD OVHDMAX 13814 hostd.526366 105.12 71.26 76.59 83.72 31.10 25.77 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 17469 vpxa.526791 33.77 19.65 24.49 26.45 8.14 3.30 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 1041 vmsyslogd.52455 26.04 14.14 15.07 16.49 10.29 9.35 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00","title":"m"},{"location":"en/esxi-esxtop-1/#n-network","text":"12:25:20pm up 5 days 13:37, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 PORT-ID USED-BY TEAM-PNIC DNAME PKTTX/s MbTX/s PSZTX PKTRX/s MbRX/s PSZRX %DRPTX %DRPRX 67108867 Management n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108869 Shadow of vmnic0 n/a vSwitch0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 67108870 vmk0 vmnic0 vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00 2214592516 vmnic0 - vSwitch0 183.11 0.37 265.00 183.11 0.14 97.00 0.00 0.00","title":"n network"},{"location":"en/esxi-esxtop-1/#d-disk-adapter","text":"12:27:54pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 ADAPTR PATH NPTH CMDS/s READS/s WRITES/s MBREAD/s MBWRTN/s DAVG/cmd KAVG/cmd GAVG/cmd QAVG/cmd vmhba0 - 2 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba1 - 1 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba2 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 vmhba64 - 0 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00","title":"d disk adapter"},{"location":"en/esxi-esxtop-1/#d-disk-device","text":"","title":"d disk device"},{"location":"en/esxi-esxtop-1/#r-rdma-device","text":"","title":"r rdma device"},{"location":"en/esxi-esxtop-1/#i-interrupt","text":"12:27:05pm up 5 days 13:39, 671 worlds, 0 VMs, 0 vCPUs; CPU load average: 0.00, 0.00, 0.00 COOKIE COUNT/s TIME/int COUNT_0 COUNT_1 COUNT_2 COUNT_3 COUNT_4 COUNT_5 COUNT_6 COUNT_7 COUNT_8 COUNT_9 COUNT_10 COUNT_11 COUNT_12 COUNT_13 COUNT_14 COUNT_15 D 0x0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V 0x1 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 V","title":"i interrupt"},{"location":"en/esxi-esxtop-1/#x-vsan","text":"","title":"x vsan"},{"location":"en/esxi-esxtop-1/#_2","text":"","title":"\u5099\u8003"},{"location":"en/esxi-esxtop-1/#_3","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-esxtop-1/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-esxtop-2/","text":"ESXi esxtop \u30d0\u30c3\u30c1 \u5b9f\u884c esxtop -b -d 2 -n 30 > esxtop-bat.csv option b: \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9 d: \u5b9f\u884c\u9593\u9694(\u79d2) n: \u5b9f\u884c\u56de\u6570 a: all all \u306f\u5927\u91cf\u306b\u51fa\u529b\u3055\u308c\u308b esxtop -b -d 2 -n 30 -a > esxtop-all.csv VM\u6307\u5b9a\u3067\u5bfe\u8c61\u3092\u7d5e\u308b \u5bfe\u8c61\u3092\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 esxtop -export-entity entitity.dat echo SchedGroup > vmselect.dat grep -i <VM-NAME> entity.dat >> vmselect.dat esxtop \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u5b9f\u884c esxtop -b -d 2 -n 30 -import-entity vmselect.dat > esxtop-vm.csv \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u30d0\u30c3\u30c1"},{"location":"en/esxi-esxtop-2/#esxi-esxtop","text":"","title":"ESXi esxtop \u30d0\u30c3\u30c1"},{"location":"en/esxi-esxtop-2/#_1","text":"esxtop -b -d 2 -n 30 > esxtop-bat.csv","title":"\u5b9f\u884c"},{"location":"en/esxi-esxtop-2/#option","text":"b: \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9 d: \u5b9f\u884c\u9593\u9694(\u79d2) n: \u5b9f\u884c\u56de\u6570 a: all","title":"option"},{"location":"en/esxi-esxtop-2/#all","text":"esxtop -b -d 2 -n 30 -a > esxtop-all.csv","title":"all \u306f\u5927\u91cf\u306b\u51fa\u529b\u3055\u308c\u308b"},{"location":"en/esxi-esxtop-2/#vm","text":"\u5bfe\u8c61\u3092\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 esxtop -export-entity entitity.dat echo SchedGroup > vmselect.dat grep -i <VM-NAME> entity.dat >> vmselect.dat esxtop \u30d0\u30c3\u30c1\u30e2\u30fc\u30c9\u3067\u5b9f\u884c esxtop -b -d 2 -n 30 -import-entity vmselect.dat > esxtop-vm.csv","title":"VM\u6307\u5b9a\u3067\u5bfe\u8c61\u3092\u7d5e\u308b"},{"location":"en/esxi-esxtop-2/#_2","text":"","title":"\u5099\u8003"},{"location":"en/esxi-esxtop-2/#_3","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-esxtop-2/#_4","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-esxtop-3/","text":"ESXi esxtop \u30c4\u30fc\u30eb GUI\u30c4\u30fc\u30eb NMONVisualizer https://nmonvisualizer.github.io/nmonvisualizer/ \u4fdd\u5b58\u3057\u305fcsv\u3092\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8868\u793a\u3059\u308b csv\u6574\u5f62 https://github.com/tkhskh/esxtop-utils \u5099\u8003 \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi esxtop \u30c4\u30fc\u30eb"},{"location":"en/esxi-esxtop-3/#esxi-esxtop","text":"","title":"ESXi esxtop \u30c4\u30fc\u30eb"},{"location":"en/esxi-esxtop-3/#gui","text":"NMONVisualizer https://nmonvisualizer.github.io/nmonvisualizer/ \u4fdd\u5b58\u3057\u305fcsv\u3092\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8868\u793a\u3059\u308b","title":"GUI\u30c4\u30fc\u30eb"},{"location":"en/esxi-esxtop-3/#csv","text":"https://github.com/tkhskh/esxtop-utils","title":"csv\u6574\u5f62"},{"location":"en/esxi-esxtop-3/#_1","text":"","title":"\u5099\u8003"},{"location":"en/esxi-esxtop-3/#_2","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-esxtop-3/#_3","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-gui-timeout/","text":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577 \u30db\u30b9\u30c8 ->\u7ba1\u7406 \u3000->\u30b7\u30b9\u30c6\u30e0 \u3000\u3000->\u8a73\u7d30\u8a2d\u5b9a HostClientSessionTimeout \u3092\u300c0\u300d\u306b\u3059\u308b \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577"},{"location":"en/esxi-gui-timeout/#esxi-gui","text":"\u30db\u30b9\u30c8 ->\u7ba1\u7406 \u3000->\u30b7\u30b9\u30c6\u30e0 \u3000\u3000->\u8a73\u7d30\u8a2d\u5b9a HostClientSessionTimeout \u3092\u300c0\u300d\u306b\u3059\u308b","title":"ESXi GUI\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u9593\u5ef6\u9577"},{"location":"en/esxi-gui-timeout/#_1","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-media-min/","text":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001Shift \uff0b O runewasel cdromBoot \u306e\u5f8c\u308d\u306b systemMediaSize=min \u3092\u5165\u529b\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u53c2\u8003 https://kb.vmware.com/s/article/81166 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b"},{"location":"en/esxi-media-min/#esxi-os","text":"","title":"ESXi OS\u9818\u57df\u3092\u5c0f\u3055\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b"},{"location":"en/esxi-media-min/#shift-o","text":"","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u3001Shift \uff0b O"},{"location":"en/esxi-media-min/#runewasel-cdromboot","text":"systemMediaSize=min \u3092\u5165\u529b\u3057\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","title":"runewasel cdromBoot \u306e\u5f8c\u308d\u306b"},{"location":"en/esxi-media-min/#_1","text":"https://kb.vmware.com/s/article/81166","title":"\u53c2\u8003"},{"location":"en/esxi-media-min/#_2","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-powercli-1/","text":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Install-Module Vmware.PowerCLI Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File Set-ExecutionPolicy RemoteSigned \u30ed\u30b0 \u4e8b\u524d\u78ba\u8a8d PS C:\\WINDOWS\\system32> $PSVersionTable Name Value ---- ----- PSVersion 5.1.19041.3930 PSEdition Desktop PSCompatibleVersions {1.0, 2.0, 3.0, 4.0...} BuildVersion 10.0.19041.3930 CLRVersion 4.0.30319.42000 WSManStackVersion 3.0 PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 Install-Module VMware.PowerCLI PS C:\\WINDOWS\\system32> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS C:\\WINDOWS\\system32> \u53c2\u8003 https://t-dilemma.info/vsphere-cmd-powercli/ https://developer.vmware.com/docs/powercli/latest/products/vmwarevsphereandvsan/ https://blogs.vmware.com/vmware-japan/2021/02/tam-blog-powercli-01.html PS C:\\WINDOWS\\system32> Install-Module VMware.PowerCLI \u4fe1\u983c\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4fe1\u983c\u3059\u308b\u5834\u5408\u306f\u3001Set-PSReposit ory \u30b3\u30de\u30f3\u30c9\u30ec\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e InstallationPolicy \u306e\u5024\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'PSGallery' \u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304b? [Y] \u306f\u3044(Y) [A] \u3059\u3079\u3066\u7d9a\u884c(A) [N] \u3044\u3044\u3048(N) [L] \u3059\u3079\u3066\u7121\u8996(L) [S] \u4e2d\u65ad(S) [?] \u30d8\u30eb\u30d7 (\u65e2\u5b9a\u5024\u306f \"N\"): A PS C:\\WINDOWS\\system32> Get-ExecutionPolicy Restricted PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' \u30c7\u30a3\u30ec\u30af\u30c8\u30ea: C:\\Program Files\\WindowsPowerShell\\Modules Mode LastWriteTime Length Name ---- ------------- ------ ---- d----- 2023/07/19 11:01 Microsoft.PowerShell.Operation.Validation d----- 2023/07/19 11:01 PackageManagement d----- 2023/07/19 11:01 Pester d----- 2023/07/19 11:01 PowerShellGet d----- 2023/07/19 11:01 PSReadline d----- 2024/01/23 13:22 VMware.CloudServices d----- 2024/01/23 13:23 VMware.DeployAutomation d----- 2024/01/23 13:23 VMware.ImageBuilder d----- 2024/01/23 13:33 VMware.PowerCLI d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk.Types d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.ApplianceService d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.CertificateManagement d----- 2024/01/23 13:30 VMware.Sdk.Nsx.Policy d----- 2024/01/23 13:23 VMware.Sdk.Runtime d----- 2024/01/23 13:30 VMware.Sdk.Srm d----- 2024/01/23 13:32 VMware.Sdk.Vcf.CloudBuilder d----- 2024/01/23 13:33 VMware.Sdk.Vcf.SddcManager d----- 2024/01/23 13:30 VMware.Sdk.Vr d----- 2024/01/23 13:25 VMware.Sdk.vSphere d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Access d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Health d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.InfraProfile d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.LocalAccounts d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Logging d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Networking d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Recovery d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.SupportBundle d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.System d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Update d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis.Tagging d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.ContentLibrary d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hcl d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hosts d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Settings d----- 2024/01/23 13:24 VMware.Sdk.vSphere.VAPI.Metadata d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authentication d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authorization d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.CertManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ConsumptionDomains d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Datastore d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Deployment d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Guest d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.HVC d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Identity d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Inventory d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ISO d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.LCM d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.NamespaceManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Namespaces d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.OVF d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Services d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Storage d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.SystemConfig d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Tagging d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Topology d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.TrustedInfrastructure d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VCHA d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Vm d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VmTemplate d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vStats d----- 2024/01/23 13:23 VMware.Sdk.vSphereRuntime d----- 2024/01/23 13:22 VMware.Vim d----- 2024/01/23 13:22 VMware.VimAutomation.Cis.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Cloud d----- 2024/01/23 13:22 VMware.VimAutomation.Common d----- 2024/01/23 13:22 VMware.VimAutomation.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Hcx d----- 2024/01/23 13:23 VMware.VimAutomation.HorizonView d----- 2024/01/23 13:22 VMware.VimAutomation.License d----- 2024/01/23 13:23 VMware.VimAutomation.Nsxt d----- 2024/01/23 13:22 VMware.VimAutomation.Sdk d----- 2024/01/23 13:23 VMware.VimAutomation.Security d----- 2024/01/23 13:22 VMware.VimAutomation.Srm d----- 2024/01/23 13:22 VMware.VimAutomation.Storage d----- 2024/01/23 13:23 VMware.VimAutomation.StorageUtility d----- 2024/01/23 13:22 VMware.VimAutomation.Vds d----- 2024/01/23 13:22 VMware.VimAutomation.Vmc d----- 2024/01/23 13:23 VMware.VimAutomation.vROps d----- 2024/01/23 13:23 VMware.VimAutomation.WorkloadManagement d----- 2024/01/23 13:23 VMware.VumAutomation \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-1/#windows-powershell-posercli","text":"","title":"Windows Powershell \u3078 PoserCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-1/#_1","text":"Install-Module Vmware.PowerCLI Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File Set-ExecutionPolicy RemoteSigned","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-1/#_2","text":"","title":"\u30ed\u30b0"},{"location":"en/esxi-powercli-1/#_3","text":"PS C:\\WINDOWS\\system32> $PSVersionTable Name Value ---- ----- PSVersion 5.1.19041.3930 PSEdition Desktop PSCompatibleVersions {1.0, 2.0, 3.0, 4.0...} BuildVersion 10.0.19041.3930 CLRVersion 4.0.30319.42000 WSManStackVersion 3.0 PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 Install-Module VMware.PowerCLI PS C:\\WINDOWS\\system32> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS C:\\WINDOWS\\system32>","title":"\u4e8b\u524d\u78ba\u8a8d"},{"location":"en/esxi-powercli-1/#_4","text":"https://t-dilemma.info/vsphere-cmd-powercli/ https://developer.vmware.com/docs/powercli/latest/products/vmwarevsphereandvsan/ https://blogs.vmware.com/vmware-japan/2021/02/tam-blog-powercli-01.html PS C:\\WINDOWS\\system32> Install-Module VMware.PowerCLI \u4fe1\u983c\u3055\u308c\u3066\u3044\u306a\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4fe1\u983c\u3059\u308b\u5834\u5408\u306f\u3001Set-PSReposit ory \u30b3\u30de\u30f3\u30c9\u30ec\u30c3\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e InstallationPolicy \u306e\u5024\u3092\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002'PSGallery' \u304b\u3089\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u304b? [Y] \u306f\u3044(Y) [A] \u3059\u3079\u3066\u7d9a\u884c(A) [N] \u3044\u3044\u3048(N) [L] \u3059\u3079\u3066\u7121\u8996(L) [S] \u4e2d\u65ad(S) [?] \u30d8\u30eb\u30d7 (\u65e2\u5b9a\u5024\u306f \"N\"): A PS C:\\WINDOWS\\system32> Get-ExecutionPolicy Restricted PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' -Recurse | Unblock-File PS C:\\WINDOWS\\system32> Get-ChildItem -Path 'C:\\Program Files\\WindowsPowerShell\\Modules' \u30c7\u30a3\u30ec\u30af\u30c8\u30ea: C:\\Program Files\\WindowsPowerShell\\Modules Mode LastWriteTime Length Name ---- ------------- ------ ---- d----- 2023/07/19 11:01 Microsoft.PowerShell.Operation.Validation d----- 2023/07/19 11:01 PackageManagement d----- 2023/07/19 11:01 Pester d----- 2023/07/19 11:01 PowerShellGet d----- 2023/07/19 11:01 PSReadline d----- 2024/01/23 13:22 VMware.CloudServices d----- 2024/01/23 13:23 VMware.DeployAutomation d----- 2024/01/23 13:23 VMware.ImageBuilder d----- 2024/01/23 13:33 VMware.PowerCLI d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk d----- 2024/01/23 13:25 VMware.PowerCLI.Sdk.Types d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.ApplianceService d----- 2024/01/23 13:25 VMware.PowerCLI.VCenter.Types.CertificateManagement d----- 2024/01/23 13:30 VMware.Sdk.Nsx.Policy d----- 2024/01/23 13:23 VMware.Sdk.Runtime d----- 2024/01/23 13:30 VMware.Sdk.Srm d----- 2024/01/23 13:32 VMware.Sdk.Vcf.CloudBuilder d----- 2024/01/23 13:33 VMware.Sdk.Vcf.SddcManager d----- 2024/01/23 13:30 VMware.Sdk.Vr d----- 2024/01/23 13:25 VMware.Sdk.vSphere d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Access d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Health d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.InfraProfile d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.LocalAccounts d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Logging d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Networking d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Recovery d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.SupportBundle d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.System d----- 2024/01/23 13:23 VMware.Sdk.vSphere.Appliance.Update d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Cis.Tagging d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.ContentLibrary d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hcl d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Hosts d----- 2024/01/23 13:24 VMware.Sdk.vSphere.Esx.Settings d----- 2024/01/23 13:24 VMware.Sdk.vSphere.VAPI.Metadata d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authentication d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Authorization d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.CertManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ConsumptionDomains d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Content d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Datastore d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Deployment d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Guest d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.HVC d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Identity d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Inventory d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.ISO d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.LCM d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.NamespaceManagement d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Namespaces d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.OVF d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Services d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.Storage d----- 2024/01/23 13:24 VMware.Sdk.vSphere.vCenter.SystemConfig d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Tagging d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Topology d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.TrustedInfrastructure d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VCHA d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.Vm d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vCenter.VmTemplate d----- 2024/01/23 13:25 VMware.Sdk.vSphere.vStats d----- 2024/01/23 13:23 VMware.Sdk.vSphereRuntime d----- 2024/01/23 13:22 VMware.Vim d----- 2024/01/23 13:22 VMware.VimAutomation.Cis.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Cloud d----- 2024/01/23 13:22 VMware.VimAutomation.Common d----- 2024/01/23 13:22 VMware.VimAutomation.Core d----- 2024/01/23 13:23 VMware.VimAutomation.Hcx d----- 2024/01/23 13:23 VMware.VimAutomation.HorizonView d----- 2024/01/23 13:22 VMware.VimAutomation.License d----- 2024/01/23 13:23 VMware.VimAutomation.Nsxt d----- 2024/01/23 13:22 VMware.VimAutomation.Sdk d----- 2024/01/23 13:23 VMware.VimAutomation.Security d----- 2024/01/23 13:22 VMware.VimAutomation.Srm d----- 2024/01/23 13:22 VMware.VimAutomation.Storage d----- 2024/01/23 13:23 VMware.VimAutomation.StorageUtility d----- 2024/01/23 13:22 VMware.VimAutomation.Vds d----- 2024/01/23 13:22 VMware.VimAutomation.Vmc d----- 2024/01/23 13:23 VMware.VimAutomation.vROps d----- 2024/01/23 13:23 VMware.VimAutomation.WorkloadManagement d----- 2024/01/23 13:23 VMware.VumAutomation","title":"\u53c2\u8003"},{"location":"en/esxi-powercli-1/#_5","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-powercli-1/#_6","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-powercli-2/","text":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell) Ubuntu \u3078\u306e PowerShell \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u3088\u308b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb PowerShell 7.2 \u3067\u5c0e\u5165\u3055\u308c\u305f\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3057\u305f\u3002 \u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u304b\u3089 Ubuntu \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306b\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3078\u306e\u30ea\u30f3\u30af\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002 \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.4 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.4.1/powershell_7.4.1-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.3.11 (\u5b89\u5b9a\u7248) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.3.11/powershell_7.3.11-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.2.18 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.2.18/powershell_7.2.18-1.deb_amd64.de Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 # Prerequisites # Update the list of packages sudo apt-get update # Install pre-requisite packages. sudo apt-get install -y wget apt-transport-https software-properties-common # Get the version of Ubuntu source /etc/os-release # Download the Microsoft repository keys wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb # Register the Microsoft repository keys sudo dpkg -i packages-microsoft-prod.deb # Delete the Microsoft repository keys file rm packages-microsoft-prod.deb # Update the list of packages after we added packages.microsoft.com sudo apt-get update ################################### # Install PowerShell sudo apt-get install -y powershell # Start PowerShell pwsh Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u51fa\u529b\u4f8b taka@ubuntu22:~$ sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 powershell \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002 (\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 131064 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002) powershell_7.4.1-1.deb_amd64.deb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ... powershell (7.4.1-1.deb) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059... powershell (7.4.1-1.deb) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ... man-db (2.10.2-1) \u306e\u30c8\u30ea\u30ac\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059 ... taka@ubuntu22:~$ taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> $PSVersionTable Name Value ---- ----- PSVersion 7.4.1 PSEdition Core GitCommitId 7.4.1 OS Ubuntu 22.04.3 LTS Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /home/taka> PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb pwsh Install-Module Vmware.PowerCLI \u51fa\u529b\u4f8b taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> Install-Module Vmware.PowerCLI Untrusted repository You are installing the modules from an untrusted repository. If you trust this repository, change its InstallationPolicy value by running the Set-PSRepository cmdlet. Are you sure you want to install the modules from 'PSGallery'? [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"N\"): A Installing package 'VMware.PowerCLI' [Installing dependent package 'VMware.PowerCLI.Sdk.Types' ] Installing package 'VMware.PowerCLI.Sdk.Types' [Unzipping ] PS /home/taka> vCenter\u63a5\u7d9a\u78ba\u8a8d Connect-VIServer -Server <IP> -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /home/taka> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /home/taka> PS /home/taka> PS /home/taka> Get-VM ubuntu2204 | Get-VMResourceConfiguration | select CpuLimitMhz CpuLimitMhz ----------- -1 PS /home/taka> (get-vm ubuntu,Windows | get-View)| select Name,{$_.Config.CpuAffinity.AffinitySet} Name $_.Config.CpuAffinity.AffinitySet ---- --------------------------------- ubuntu {4, 5, 6, 7} windows {4, 5, 6, 7} PS /home/taka> \u53c2\u8003 https://learn.microsoft.com/ja-jp/powershell/scripting/install/install-ubuntu?view=powershell-7.4 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell)"},{"location":"en/esxi-powercli-2/#powercli-powershell","text":"","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (PowerShell)"},{"location":"en/esxi-powercli-2/#ubuntu-powershell-powercli","text":"","title":"Ubuntu \u3078\u306e PowerShell \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-2/#_1","text":"PowerShell 7.2 \u3067\u5c0e\u5165\u3055\u308c\u305f\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u3088\u308a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5bb9\u6613\u306b\u306a\u308a\u307e\u3057\u305f\u3002 \u30ea\u30ea\u30fc\u30b9\u30da\u30fc\u30b8\u304b\u3089 Ubuntu \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u306b\u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u73fe\u5728\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3078\u306e\u30ea\u30f3\u30af\u306f\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002 \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.4 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.4.1/powershell_7.4.1-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.3.11 (\u5b89\u5b9a\u7248) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.3.11/powershell_7.3.11-1.deb_amd64.deb \u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e Ubuntu \u7528 PowerShell 7.2.18 (LTS) \u30e6\u30cb\u30d0\u30fc\u30b5\u30eb \u30d1\u30c3\u30b1\u30fc\u30b8 https://github.com/PowerShell/PowerShell/releases/download/v7.2.18/powershell_7.2.18-1.deb_amd64.de","title":"\u76f4\u63a5\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306b\u3088\u308b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-2/#power-shell","text":"# Prerequisites # Update the list of packages sudo apt-get update # Install pre-requisite packages. sudo apt-get install -y wget apt-transport-https software-properties-common # Get the version of Ubuntu source /etc/os-release # Download the Microsoft repository keys wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb # Register the Microsoft repository keys sudo dpkg -i packages-microsoft-prod.deb # Delete the Microsoft repository keys file rm packages-microsoft-prod.deb # Update the list of packages after we added packages.microsoft.com sudo apt-get update ################################### # Install PowerShell sudo apt-get install -y powershell # Start PowerShell pwsh","title":"Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b9\u30af\u30ea\u30d7\u30c8"},{"location":"en/esxi-powercli-2/#power-shell_1","text":"sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u51fa\u529b\u4f8b taka@ubuntu22:~$ sudo dpkg -i powershell_7.4.1-1.deb_amd64.deb \u4ee5\u524d\u306b\u672a\u9078\u629e\u306e\u30d1\u30c3\u30b1\u30fc\u30b8 powershell \u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002 (\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059 ... \u73fe\u5728 131064 \u500b\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002) powershell_7.4.1-1.deb_amd64.deb \u3092\u5c55\u958b\u3059\u308b\u6e96\u5099\u3092\u3057\u3066\u3044\u307e\u3059 ... powershell (7.4.1-1.deb) \u3092\u5c55\u958b\u3057\u3066\u3044\u307e\u3059... powershell (7.4.1-1.deb) \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059 ... man-db (2.10.2-1) \u306e\u30c8\u30ea\u30ac\u3092\u51e6\u7406\u3057\u3066\u3044\u307e\u3059 ... taka@ubuntu22:~$ taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> $PSVersionTable Name Value ---- ----- PSVersion 7.4.1 PSEdition Core GitCommitId 7.4.1 OS Ubuntu 22.04.3 LTS Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /home/taka>","title":"Power shell\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-2/#powercli","text":"pwsh Install-Module Vmware.PowerCLI \u51fa\u529b\u4f8b taka@ubuntu22:~$ pwsh PowerShell 7.4.1 PS /home/taka> Install-Module Vmware.PowerCLI Untrusted repository You are installing the modules from an untrusted repository. If you trust this repository, change its InstallationPolicy value by running the Set-PSRepository cmdlet. Are you sure you want to install the modules from 'PSGallery'? [Y] Yes [A] Yes to All [N] No [L] No to All [S] Suspend [?] Help (default is \"N\"): A Installing package 'VMware.PowerCLI' [Installing dependent package 'VMware.PowerCLI.Sdk.Types' ] Installing package 'VMware.PowerCLI.Sdk.Types' [Unzipping ] PS /home/taka>","title":"PowerCLI\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-2/#vcenter","text":"Connect-VIServer -Server <IP> -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /home/taka> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /home/taka> PS /home/taka> PS /home/taka> Get-VM ubuntu2204 | Get-VMResourceConfiguration | select CpuLimitMhz CpuLimitMhz ----------- -1 PS /home/taka> (get-vm ubuntu,Windows | get-View)| select Name,{$_.Config.CpuAffinity.AffinitySet} Name $_.Config.CpuAffinity.AffinitySet ---- --------------------------------- ubuntu {4, 5, 6, 7} windows {4, 5, 6, 7} PS /home/taka>","title":"vCenter\u63a5\u7d9a\u78ba\u8a8d"},{"location":"en/esxi-powercli-2/#_2","text":"https://learn.microsoft.com/ja-jp/powershell/scripting/install/install-ubuntu?view=powershell-7.4","title":"\u53c2\u8003"},{"location":"en/esxi-powercli-2/#_3","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-powercli-3/","text":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker) Ubuntu \u3078\u306e docker \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb docker \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb apt install sudo apt install docker.io PowerCLI install with docker sudo su - \u51fa\u529b\u4f8b root@ubuntu22:~# systemctl status containerd.service \u25cf containerd.service - containerd container runtime Loaded: loaded (/lib/systemd/system/containerd.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-02-02 16:48:51 JST; 1min 5s ago Docs: https://containerd.io Main PID: 2615 (containerd) Tasks: 10 Memory: 14.7M CPU: 572ms CGroup: /system.slice/containerd.service mq2615 /usr/bin/containerd 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511503688+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511633595+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511755423+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511812952+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511836373+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511876160+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511965293+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512088658+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512201855+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 systemd[1]: Started containerd container runtime. root@ubuntu22:~# docker pull docker pull vmware/powerclicore:latest \u51fa\u529b\u4f8b root@ubuntu22:~# docker pull vmware/powerclicore:latest latest: Pulling from vmware/powerclicore ca1778b69356: Pull complete 052498a0600e: Pull complete e4bb439630bb: Pull complete 6c548366e47a: Pull complete 21c27127fa53: Pull complete 45ba8533c4dc: Pull complete 149c0c565f74: Pull complete a4218067cd6b: Pull complete 4d4343a21bed: Pull complete fa5ef76a57a5: Pull complete Digest: sha256:5d13398ec75c0c3858f2f68a598db4368f4c22a98d0d67ce926b181e420778d3 Status: Downloaded newer image for vmware/powerclicore:latest docker.io/vmware/powerclicore:latest root@ubuntu22:~# docker run docker run --rm -it vmware/powerclicore \u51fa\u529b\u4f8b root@ubuntu22:~# docker run --rm -it vmware/powerclicore PowerShell 7.2.11 Copyright (c) Microsoft Corporation. https://aka.ms/powershell Type 'help' to get help. PS /root> PowerCLI\u78ba\u8a8d \u30d0\u30fc\u30b8\u30e7\u30f3 $PSVersionTable \u51fa\u529b\u4f8b PS /root> $PSVersionTable Name Value ---- ----- PSVersion 7.2.11 PSEdition Core GitCommitId 7.2.11 OS Linux 5.15.0-92-generic #102-Ubuntu SMP Wed Jan 10 09:33:48 UTC 2024 Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /root> vCenter\u63a5\u7d9a Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /root> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /root> \u52d5\u4f5c\u78ba\u8a8d PS /root> Get-VM Name PowerState Num CPUs MemoryGB ---- ---------- -------- -------- ubuntu2204 PoweredOff 4 8.000 ZABBIX PoweredOn 4 4.000 UBUNTU22 PoweredOn 4 8.000 WinDev2311Eval PoweredOff 4 8.000 vCenter PoweredOn 4 19.000 K8S-00 PoweredOn 4 8.000 JMETER-DESKTOP PoweredOn 4 8.000 JMETER PoweredOff 4 8.000 UBUNTU22-DESKTOP PoweredOff 4 8.000 PS /root> \u53c2\u8003 https://github.com/vmware/powerclicore \u5e83\u544a \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker)"},{"location":"en/esxi-powercli-3/#powercli-docker","text":"","title":"PowerCLI \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (docker)"},{"location":"en/esxi-powercli-3/#ubuntu-docker-powercli","text":"","title":"Ubuntu \u3078\u306e docker \u3068 PowerCLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-3/#docker","text":"","title":"docker \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/esxi-powercli-3/#apt-install","text":"sudo apt install docker.io","title":"apt install"},{"location":"en/esxi-powercli-3/#powercli-install","text":"","title":"PowerCLI install"},{"location":"en/esxi-powercli-3/#with-docker","text":"sudo su - \u51fa\u529b\u4f8b root@ubuntu22:~# systemctl status containerd.service \u25cf containerd.service - containerd container runtime Loaded: loaded (/lib/systemd/system/containerd.service; enabled; vendor preset: enabled) Active: active (running) since Fri 2024-02-02 16:48:51 JST; 1min 5s ago Docs: https://containerd.io Main PID: 2615 (containerd) Tasks: 10 Memory: 14.7M CPU: 572ms CGroup: /system.slice/containerd.service mq2615 /usr/bin/containerd 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511503688+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511633595+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511755423+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511812952+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511836373+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511876160+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.511965293+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512088658+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 containerd[2615]: time=\"2024-02-02T16:48:51.512201855+09:00\" level=info m> 2\u6708 02 16:48:51 ubuntu22 systemd[1]: Started containerd container runtime. root@ubuntu22:~#","title":"with docker"},{"location":"en/esxi-powercli-3/#docker-pull","text":"docker pull vmware/powerclicore:latest \u51fa\u529b\u4f8b root@ubuntu22:~# docker pull vmware/powerclicore:latest latest: Pulling from vmware/powerclicore ca1778b69356: Pull complete 052498a0600e: Pull complete e4bb439630bb: Pull complete 6c548366e47a: Pull complete 21c27127fa53: Pull complete 45ba8533c4dc: Pull complete 149c0c565f74: Pull complete a4218067cd6b: Pull complete 4d4343a21bed: Pull complete fa5ef76a57a5: Pull complete Digest: sha256:5d13398ec75c0c3858f2f68a598db4368f4c22a98d0d67ce926b181e420778d3 Status: Downloaded newer image for vmware/powerclicore:latest docker.io/vmware/powerclicore:latest root@ubuntu22:~#","title":"docker pull"},{"location":"en/esxi-powercli-3/#docker-run","text":"docker run --rm -it vmware/powerclicore \u51fa\u529b\u4f8b root@ubuntu22:~# docker run --rm -it vmware/powerclicore PowerShell 7.2.11 Copyright (c) Microsoft Corporation. https://aka.ms/powershell Type 'help' to get help. PS /root>","title":"docker run"},{"location":"en/esxi-powercli-3/#powercli","text":"","title":"PowerCLI\u78ba\u8a8d"},{"location":"en/esxi-powercli-3/#_1","text":"$PSVersionTable \u51fa\u529b\u4f8b PS /root> $PSVersionTable Name Value ---- ----- PSVersion 7.2.11 PSEdition Core GitCommitId 7.2.11 OS Linux 5.15.0-92-generic #102-Ubuntu SMP Wed Jan 10 09:33:48 UTC 2024 Platform Unix PSCompatibleVersions {1.0, 2.0, 3.0, 4.0\u2026} PSRemotingProtocolVersion 2.3 SerializationVersion 1.1.0.1 WSManStackVersion 3.0 PS /root>","title":"\u30d0\u30fc\u30b8\u30e7\u30f3"},{"location":"en/esxi-powercli-3/#vcenter","text":"Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f \u51fa\u529b\u4f8b PS /root> Connect-VIServer -Server 192.168.0.100 -User Administrator@vsphere.local -Password 'xxxxxxxx' -f Name Port User ---- ---- ---- 192.168.0.100 443 VSPHERE.LOCAL\\Administrator PS /root>","title":"vCenter\u63a5\u7d9a"},{"location":"en/esxi-powercli-3/#_2","text":"PS /root> Get-VM Name PowerState Num CPUs MemoryGB ---- ---------- -------- -------- ubuntu2204 PoweredOff 4 8.000 ZABBIX PoweredOn 4 4.000 UBUNTU22 PoweredOn 4 8.000 WinDev2311Eval PoweredOff 4 8.000 vCenter PoweredOn 4 19.000 K8S-00 PoweredOn 4 8.000 JMETER-DESKTOP PoweredOn 4 8.000 JMETER PoweredOff 4 8.000 UBUNTU22-DESKTOP PoweredOff 4 8.000 PS /root>","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"en/esxi-powercli-3/#_3","text":"https://github.com/vmware/powerclicore","title":"\u53c2\u8003"},{"location":"en/esxi-powercli-3/#_4","text":"","title":"\u5e83\u544a"},{"location":"en/esxi-powercli-3/#_5","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-snmp-trap/","text":"ESXi snmp trap \u8a2d\u5b9a \u8a2d\u5b9a\u78ba\u8a8d esxcli system snmp get \u5b9b\u5148\u306e\u6307\u5b9a esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public \u8907\u6570\u6307\u5b9a\u306f\u300c,\u300d\u3067\u533a\u5207\u308b esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public,192.168.0.2@162/public,192.168.0.3@162/public \u78ba\u8a8d esxcli system snmp test \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi snmp trap \u8a2d\u5b9a"},{"location":"en/esxi-snmp-trap/#esxi-snmp-trap","text":"","title":"ESXi snmp trap \u8a2d\u5b9a"},{"location":"en/esxi-snmp-trap/#_1","text":"esxcli system snmp get","title":"\u8a2d\u5b9a\u78ba\u8a8d"},{"location":"en/esxi-snmp-trap/#_2","text":"esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public","title":"\u5b9b\u5148\u306e\u6307\u5b9a"},{"location":"en/esxi-snmp-trap/#_3","text":"esxcli system snmp set -e=true -c=public -t=192.168.0.1@162/public,192.168.0.2@162/public,192.168.0.3@162/public","title":"\u8907\u6570\u6307\u5b9a\u306f\u300c,\u300d\u3067\u533a\u5207\u308b"},{"location":"en/esxi-snmp-trap/#_4","text":"esxcli system snmp test","title":"\u78ba\u8a8d"},{"location":"en/esxi-snmp-trap/#_5","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-snmp-trap/#_6","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/esxi-snmp/","text":"ESXi snmp \u8a2d\u5b9a \u78ba\u8a8d esxcli system snmp get \u5fc5\u9808 \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306e\u6307\u5b9a esxcli system snmp set --communities public \u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u5316 esxcli system snmp set --enable true \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5 /etc/init.d/snmpd start \u78ba\u8a8d \u4ed6\u306e\u6a5f\u5668\u304b\u3089 snmpwalk -v 2c -c public 192.168.0.10 . \u5099\u8003 \u3010\u4efb\u610f\u3011\u7279\u5b9a\u306eSNMP \u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3060\u3051\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u5834\u5408 esxcli system snmp set --targets \u3010SNMP \u30de\u30cd\u30fc\u30b8\u30e3\u306eIP\u30a2\u30c9\u30ec\u30b9 or \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3011 \u3010\u4e0d\u8981\uff1f\u3011 firewall \u306bsnmp \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002 esxcli network firewall ruleset set --ruleset-id=snmp --allowed-all true \u3010\u4e0d\u8981\uff1f\u3011\u30eb\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002 esxcli network firewall ruleset set --ruleset-id=snmp --enabled true \u53c2\u8003 \u5e83\u544a Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"ESXi snmp \u8a2d\u5b9a"},{"location":"en/esxi-snmp/#esxi-snmp","text":"","title":"ESXi snmp \u8a2d\u5b9a"},{"location":"en/esxi-snmp/#_1","text":"esxcli system snmp get","title":"\u78ba\u8a8d"},{"location":"en/esxi-snmp/#_2","text":"","title":"\u5fc5\u9808"},{"location":"en/esxi-snmp/#_3","text":"esxcli system snmp set --communities public","title":"\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306e\u6307\u5b9a"},{"location":"en/esxi-snmp/#_4","text":"esxcli system snmp set --enable true","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u5316"},{"location":"en/esxi-snmp/#_5","text":"/etc/init.d/snmpd start","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5"},{"location":"en/esxi-snmp/#_6","text":"\u4ed6\u306e\u6a5f\u5668\u304b\u3089 snmpwalk -v 2c -c public 192.168.0.10 .","title":"\u78ba\u8a8d"},{"location":"en/esxi-snmp/#_7","text":"","title":"\u5099\u8003"},{"location":"en/esxi-snmp/#snmp","text":"esxcli system snmp set --targets \u3010SNMP \u30de\u30cd\u30fc\u30b8\u30e3\u306eIP\u30a2\u30c9\u30ec\u30b9 or \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a2\u30c9\u30ec\u30b9\u3011","title":"\u3010\u4efb\u610f\u3011\u7279\u5b9a\u306eSNMP \u30de\u30cd\u30fc\u30b8\u30e3\u3068\u3060\u3051\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u5834\u5408"},{"location":"en/esxi-snmp/#firewall-snmp","text":"esxcli network firewall ruleset set --ruleset-id=snmp --allowed-all true","title":"\u3010\u4e0d\u8981\uff1f\u3011 firewall \u306bsnmp \u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002"},{"location":"en/esxi-snmp/#_8","text":"esxcli network firewall ruleset set --ruleset-id=snmp --enabled true","title":"\u3010\u4e0d\u8981\uff1f\u3011\u30eb\u30fc\u30eb\u3092\u6709\u52b9\u5316\u3057\u307e\u3059\u3002"},{"location":"en/esxi-snmp/#_9","text":"","title":"\u53c2\u8003"},{"location":"en/esxi-snmp/#_10","text":"Amazon \uff1a VMware vSphere7\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u30e1\u30eb\u30ab\u30ea\uff1avSphere7 \u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30ac\u30a4\u30c9 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/firewalld/","text":"firewalld\u30e1\u30e2 \u78ba\u8a8d \u72b6\u614b\u78ba\u8a8d firewall-cmd --state \u3059\u3079\u3066\u306e\u30be\u30fc\u30f3\u78ba\u8a8d firewall-cmd --list-all \u7279\u5b9a\u306e\u30be\u30fc\u30f3\u3092\u78ba\u8a8d firewall-cmd --list-all --zone=\u30be\u30fc\u30f3\u540d \u30b5\u30fc\u30d3\u30b9\u540d\u4e00\u89a7 firewall-cmd --get-services \u30b5\u30fc\u30d3\u30b9\u540d\u3067\u306e\u78ba\u8a8d firewall-cmd --info-service=pop3 \u8a2d\u5b9a \u8ffd\u52a0 firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --add-service=\u30b5\u30fc\u30d3\u30b9\u540d -permanent firewall-cmd --zone=public --add-service=pop3 --permanent \u30dd\u30fc\u30c8\u8ffd\u52a0 firewall-cmd --add-port=10000/tcp --zone=public --permanent \u524a\u9664 firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d --permanent firewall-cmd --zone=public --remove-service=pop3 \u30dd\u30fc\u30c8\u524a\u9664 firewall-cmd --remove-port=10000/tcp --zone=public --permanent \u53cd\u6620 firewall-cmd --reload \u7279\u5b9a\u306eIP\u3060\u3051\u8a31\u53ef(\u30ea\u30c3\u30c1\u30eb\u30fc\u30eb) \u30b5\u30fc\u30d3\u30b9\u3092\u30be\u30fc\u30f3\u304b\u3089\u524a\u9664 firewall-cmd --permanent --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d \u8a31\u53ef\u3057\u305fIP\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a firewall-cmd --permanent --zone=\u30be\u30fc\u30f3\u540d --add-rich-rule=\"rule family=\"ipv4\" source address=\"\u8a31\u53ef\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\" port protocol=\"tcp\" port=\"\u30dd\u30fc\u30c8\u756a\u53f7\" accept\" firewall-cmd --permanent --zone=public --add-rich-rule=\"rule family=\"ipv4\" source address=\"27.94.240.161/32\" port protocol=\"tcp\" port=\"2222\" accept\" \u5e83\u544a Amazon.co.jp: \u6a19\u6e96\u30c6\u30ad\u30b9\u30c8 CentOS 8 \u69cb\u7bc9\u30fb\u904b\u7528\u30fb\u7ba1\u7406\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30ac\u30a4\u30c9 : Kindle\u30b9\u30c8\u30a2 Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"firewalld\u30e1\u30e2"},{"location":"en/firewalld/#firewalld","text":"","title":"firewalld\u30e1\u30e2"},{"location":"en/firewalld/#_1","text":"","title":"\u78ba\u8a8d"},{"location":"en/firewalld/#_2","text":"firewall-cmd --state","title":"\u72b6\u614b\u78ba\u8a8d"},{"location":"en/firewalld/#_3","text":"firewall-cmd --list-all","title":"\u3059\u3079\u3066\u306e\u30be\u30fc\u30f3\u78ba\u8a8d"},{"location":"en/firewalld/#_4","text":"firewall-cmd --list-all --zone=\u30be\u30fc\u30f3\u540d","title":"\u7279\u5b9a\u306e\u30be\u30fc\u30f3\u3092\u78ba\u8a8d"},{"location":"en/firewalld/#_5","text":"firewall-cmd --get-services","title":"\u30b5\u30fc\u30d3\u30b9\u540d\u4e00\u89a7"},{"location":"en/firewalld/#_6","text":"firewall-cmd --info-service=pop3","title":"\u30b5\u30fc\u30d3\u30b9\u540d\u3067\u306e\u78ba\u8a8d"},{"location":"en/firewalld/#_7","text":"","title":"\u8a2d\u5b9a"},{"location":"en/firewalld/#_8","text":"firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --add-service=\u30b5\u30fc\u30d3\u30b9\u540d -permanent firewall-cmd --zone=public --add-service=pop3 --permanent","title":"\u8ffd\u52a0"},{"location":"en/firewalld/#_9","text":"firewall-cmd --add-port=10000/tcp --zone=public --permanent","title":"\u30dd\u30fc\u30c8\u8ffd\u52a0"},{"location":"en/firewalld/#_10","text":"firewall-cmd --zone=\u30be\u30fc\u30f3\u540d --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d --permanent firewall-cmd --zone=public --remove-service=pop3","title":"\u524a\u9664"},{"location":"en/firewalld/#_11","text":"firewall-cmd --remove-port=10000/tcp --zone=public --permanent","title":"\u30dd\u30fc\u30c8\u524a\u9664"},{"location":"en/firewalld/#_12","text":"firewall-cmd --reload","title":"\u53cd\u6620"},{"location":"en/firewalld/#ip","text":"","title":"\u7279\u5b9a\u306eIP\u3060\u3051\u8a31\u53ef(\u30ea\u30c3\u30c1\u30eb\u30fc\u30eb)"},{"location":"en/firewalld/#_13","text":"firewall-cmd --permanent --remove-service=\u30b5\u30fc\u30d3\u30b9\u540d","title":"\u30b5\u30fc\u30d3\u30b9\u3092\u30be\u30fc\u30f3\u304b\u3089\u524a\u9664"},{"location":"en/firewalld/#ip_1","text":"firewall-cmd --permanent --zone=\u30be\u30fc\u30f3\u540d --add-rich-rule=\"rule family=\"ipv4\" source address=\"\u8a31\u53ef\u3059\u308bIP\u30a2\u30c9\u30ec\u30b9\" port protocol=\"tcp\" port=\"\u30dd\u30fc\u30c8\u756a\u53f7\" accept\" firewall-cmd --permanent --zone=public --add-rich-rule=\"rule family=\"ipv4\" source address=\"27.94.240.161/32\" port protocol=\"tcp\" port=\"2222\" accept\"","title":"\u8a31\u53ef\u3057\u305fIP\u30dd\u30fc\u30c8\u3092\u8a2d\u5b9a"},{"location":"en/firewalld/#_14","text":"Amazon.co.jp: \u6a19\u6e96\u30c6\u30ad\u30b9\u30c8 CentOS 8 \u69cb\u7bc9\u30fb\u904b\u7528\u30fb\u7ba1\u7406\u30d1\u30fc\u30d5\u30a7\u30af\u30c8\u30ac\u30a4\u30c9 : Kindle\u30b9\u30c8\u30a2 Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/ip-change-1/","text":"IP\u5909\u66f4 (ip,ifconfig) \u8a2d\u5b9a IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4 ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0 IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4 /etc/sysconfig/network-scripts \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1 \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (ip,ifconfig)"},{"location":"en/ip-change-1/#ip-ipifconfig","text":"","title":"IP\u5909\u66f4 (ip,ifconfig)"},{"location":"en/ip-change-1/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"en/ip-change-1/#ip","text":"ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0","title":"IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4"},{"location":"en/ip-change-1/#ip_1","text":"/etc/sysconfig/network-scripts \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1","title":"IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4"},{"location":"en/ip-change-1/#_2","text":"","title":"\u53c2\u8003"},{"location":"en/ip-change-1/#_3","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/ip-change-2/","text":"IP\u5909\u66f4 (netplan,ubuntu) \u8a2d\u5b9a /etc/netplan \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b cd /etc/netplan \u30d5\u30a1\u30a4\u30eb\u7de8\u96c6 vi 00-installer-config.yaml \u5185\u5bb9 network: ethernets: ens34: addresses: - 192.168.0.10/24 nameservers: addresses: - 8.8.8.8 search: [] routes: - to: default via: 192.168.0.1 version: 2 \u53cd\u6620 netplan apply \u53c2\u8003 \u5143\u30d5\u30a1\u30a4\u30eb(DHCP) cat /etc/netplan/00-installer-config.yaml.bak #This is the network config written by 'subiquity' network: ethernets: ens34: dhcp4: true version: 2 \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (netplan,ubuntu)"},{"location":"en/ip-change-2/#ip-netplanubuntu","text":"","title":"IP\u5909\u66f4 (netplan,ubuntu)"},{"location":"en/ip-change-2/#_1","text":"","title":"\u8a2d\u5b9a"},{"location":"en/ip-change-2/#etcnetplan","text":"cd /etc/netplan","title":"/etc/netplan \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b"},{"location":"en/ip-change-2/#_2","text":"vi 00-installer-config.yaml","title":"\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6"},{"location":"en/ip-change-2/#_3","text":"network: ethernets: ens34: addresses: - 192.168.0.10/24 nameservers: addresses: - 8.8.8.8 search: [] routes: - to: default via: 192.168.0.1 version: 2","title":"\u5185\u5bb9"},{"location":"en/ip-change-2/#_4","text":"netplan apply","title":"\u53cd\u6620"},{"location":"en/ip-change-2/#dhcp","text":"cat /etc/netplan/00-installer-config.yaml.bak #This is the network config written by 'subiquity' network: ethernets: ens34: dhcp4: true version: 2","title":"\u53c2\u8003 \u5143\u30d5\u30a1\u30a4\u30eb(DHCP)"},{"location":"en/ip-change-2/#_5","text":"","title":"\u53c2\u8003"},{"location":"en/ip-change-2/#_6","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/ip-change-3/","text":"IP\u5909\u66f4 (nmcli) nmcli \u30b3\u30de\u30f3\u30c9 \u8a2d\u5b9a\u540d\u78ba\u8a8d nmcli c \u51fa\u529b\u4f8b NAME UUID TYPE DEVICE ens192 b7d983f9-769e-40a9-80ad-29879584ed9d ethernet ens192 \u3000\u3000\u2191ens192\u3092\u8a2d\u5b9a\u3059\u308b IP\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a nmcli c mod ens192 ipv4.method manual ipv4.addresses 192.168.0.50/24 connection.autoconnect yes \u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a nmcli c mod ens192 ipv4.gateway 192.168.0.254 DNS \u8a2d\u5b9a nmcli c mod ens192 +ipv4.dns 192.168.0.254 \u78ba\u8a8d ip a \u51fa\u529b\u4f8b 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:00:11:11:22:22 brd ff:ff:ff:ff:ff:ff altname enp3s0 inet 192.168.0.50/24 brd 192.168.0.255 scope global noprefixroute ens160 valid_lft forever preferred_lft forever \u53c2\u8003 \u5e83\u544a Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"IP\u5909\u66f4 (nmcli)"},{"location":"en/ip-change-3/#ip-nmcli","text":"","title":"IP\u5909\u66f4 (nmcli)"},{"location":"en/ip-change-3/#nmcli","text":"","title":"nmcli \u30b3\u30de\u30f3\u30c9"},{"location":"en/ip-change-3/#_1","text":"nmcli c \u51fa\u529b\u4f8b NAME UUID TYPE DEVICE ens192 b7d983f9-769e-40a9-80ad-29879584ed9d ethernet ens192 \u3000\u3000\u2191ens192\u3092\u8a2d\u5b9a\u3059\u308b","title":"\u8a2d\u5b9a\u540d\u78ba\u8a8d"},{"location":"en/ip-change-3/#ip","text":"nmcli c mod ens192 ipv4.method manual ipv4.addresses 192.168.0.50/24 connection.autoconnect yes","title":"IP\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a"},{"location":"en/ip-change-3/#_2","text":"nmcli c mod ens192 ipv4.gateway 192.168.0.254","title":"\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u8a2d\u5b9a"},{"location":"en/ip-change-3/#dns","text":"nmcli c mod ens192 +ipv4.dns 192.168.0.254","title":"DNS \u8a2d\u5b9a"},{"location":"en/ip-change-3/#_3","text":"ip a \u51fa\u529b\u4f8b 1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: ens192: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP group default qlen 1000 link/ether 00:00:11:11:22:22 brd ff:ff:ff:ff:ff:ff altname enp3s0 inet 192.168.0.50/24 brd 192.168.0.255 scope global noprefixroute ens160 valid_lft forever preferred_lft forever","title":"\u78ba\u8a8d"},{"location":"en/ip-change-3/#_4","text":"","title":"\u53c2\u8003"},{"location":"en/ip-change-3/#_5","text":"Amazon.co.jp: Ubuntu\u30b5\u30fc\u30d0\u30fc\u5fb9\u5e95\u5165\u9580 eBook : \u4e2d\u5cf6 \u80fd\u548c: \u672c \u30e1\u30eb\u30ab\u30ea\uff1aLinux\u3000\u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/mkdocs/","text":"Welcome to MkDocs offical documents For full documentation visit mkdocs.org . mkdocs-material . mkdocs install pip pip install --upgrade pip pip install mkdocs pip install mkdocs-material pip freeze | grep mkdocs mkdocs new mkdocs new test ll cd test/ ll vi mkdocs.yml site_name: memo blog ##Basic Configuration theme: name: material palette: primary: pink mkdocs build mkdocs build mkdocs serve mkdocs serve -a 192.168.10.10:8000 Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Welcome to MkDocs"},{"location":"en/mkdocs/#welcome-to-mkdocs","text":"","title":"Welcome to MkDocs"},{"location":"en/mkdocs/#offical-documents","text":"","title":"offical documents"},{"location":"en/mkdocs/#for-full-documentation-visit","text":"mkdocs.org . mkdocs-material .","title":"For full documentation visit"},{"location":"en/mkdocs/#mkdocs-install","text":"","title":"mkdocs install"},{"location":"en/mkdocs/#pip","text":"pip install --upgrade pip pip install mkdocs pip install mkdocs-material pip freeze | grep mkdocs","title":"pip"},{"location":"en/mkdocs/#mkdocs-new","text":"mkdocs new test ll cd test/ ll vi mkdocs.yml site_name: memo blog ##Basic Configuration theme: name: material palette: primary: pink","title":"mkdocs new"},{"location":"en/mkdocs/#mkdocs-build","text":"mkdocs build mkdocs serve mkdocs serve -a 192.168.10.10:8000","title":"mkdocs build"},{"location":"en/mkdocs/#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"en/mkdocs/#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"en/raspi-co2/","text":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b \u6982\u8981 \u30e9\u30ba\u30d1\u30a4\u306bCO2\u30bb\u30f3\u30b5\u30fc mh_z19 \u3067\u4e8c\u9178\u5316\u70ad\u7d20\u3092\u6e2c\u5b9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3001prometheus\u3067\u30b0\u30e9\u30d5\u5316\u3059\u308b\u3002 \u30e9\u30ba\u30d1\u30a4\u8a2d\u5b9a \u30b7\u30ea\u30a2\u30eb\u8a2d\u5b9a root\u3067\u4f5c\u696d sudo su - raspi-config 3 Interface Options \u3000I1 SSH Enable/disable remote command line access using SSH I2 VNC Enable/disable graphical remote desktop access I3 SPI Enable/disable automatic loading of SPI kernel module I4 I2C Enable/disable automatic loading of I2C kernel module \u2606I5 Serial Port Enable/disable shell messages on the serial connection I6 1-Wire Enable/disable one-wire interface I7 Remote GPIO Enable/disable remote access to GPIO pins Would you like a login shell to be accessible over serial? \u3067\u300c\u3044\u3044\u3048\u300d\u3092\u9078\u629e\u3059\u308b Would you like the serial port hardware to be enabled? \u3067\u300c\u306f\u3044\u300d\u3092\u9078\u629e\u3059\u308b \u518d\u8d77\u52d5 reboot pip install sudo su - apt update apt upgrade apt install python3-pip pip3 install --break-system-packages --user mh_z19 python -m mh_z19 CO2\u30bb\u30f3\u30b5\u30fc mh_z19\u63a5\u7d9a \u4e8c\u9178\u5316\u70ad\u7d20\u304c\u3068\u308c\u308b root@raspberrypi:~# python -m mh_z19 {\"co2\": 593} root@raspberrypi:~# \u6e29\u5ea6\u3082\u3068\u308c\u308b\u3063\u307d\u3044 root@raspberrypi:~# python -m mh_z19 --all {\"co2\": 402, \"temperature\": 26, \"TT\": 66, \"SS\": 0, \"UhUl\": 13568} root@raspberrypi:~# node-exporter \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb text collect \u3092\u4f7f\u3046\u306e\u3067 prometheus-node-exporter-collectors \u3092 apt install apt install prometheus-node-exporter-collectors node-exporter \u3067\u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5834\u6240 ls -l /var/lib/prometheus/node-exporter/ \u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e \u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210 vi collect-co2.sh \u5185\u5bb9 #!/bin/bash ### file path ### PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=${PRM_PATH}/mh_z19.prom.tmp PRM_FILE=${PRM_PATH}/mh_z19.prom ### collect co2 value ### i=0 while [ $i -le 10 ] do sleep 1 VALUE=`python -m mh_z19 | jq .[]` if [ -z $VALUE ]; then ((i++)) echo \"co2 value is null. retry $i\" else echo \"co2 value is $VALUE\" break fi done ### put prom file ### echo \"mh_z19_co2 $VALUE\" > $TMP_FILE echo \"mh_z19_co2_retry $i\" >> $TMP_FILE mv $TMP_FILE $PRM_FILE exit \u52d5\u4f5c\u78ba\u8a8d chmod 755 collect-co2.sh ./collect-co2.sh \u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/mh_z19.prom \u51fa\u529b\u4f8b mh_z19_co2 713 mh_z19_co2_retry 0 crontab crontab -e \u8ffd\u52a0\u3059\u308b ### raspi-co2-exporter ### * * * * * /root/collect-co2.sh prometheus \u8a2d\u5b9a prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b - job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605 grafana \u8a2d\u5b9a grafana-co2.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b \u53c2\u8003 https://github.com/UedaTakeyuki/mh-z19 \u5e83\u544a Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b"},{"location":"en/raspi-co2/#co2","text":"","title":"\u30e9\u30ba\u30d1\u30a4\u3067CO2\u3092\u306f\u304b\u308b"},{"location":"en/raspi-co2/#_1","text":"\u30e9\u30ba\u30d1\u30a4\u306bCO2\u30bb\u30f3\u30b5\u30fc mh_z19 \u3067\u4e8c\u9178\u5316\u70ad\u7d20\u3092\u6e2c\u5b9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3057\u3001prometheus\u3067\u30b0\u30e9\u30d5\u5316\u3059\u308b\u3002","title":"\u6982\u8981"},{"location":"en/raspi-co2/#_2","text":"","title":"\u30e9\u30ba\u30d1\u30a4\u8a2d\u5b9a"},{"location":"en/raspi-co2/#_3","text":"root\u3067\u4f5c\u696d sudo su - raspi-config 3 Interface Options \u3000I1 SSH Enable/disable remote command line access using SSH I2 VNC Enable/disable graphical remote desktop access I3 SPI Enable/disable automatic loading of SPI kernel module I4 I2C Enable/disable automatic loading of I2C kernel module \u2606I5 Serial Port Enable/disable shell messages on the serial connection I6 1-Wire Enable/disable one-wire interface I7 Remote GPIO Enable/disable remote access to GPIO pins Would you like a login shell to be accessible over serial? \u3067\u300c\u3044\u3044\u3048\u300d\u3092\u9078\u629e\u3059\u308b Would you like the serial port hardware to be enabled? \u3067\u300c\u306f\u3044\u300d\u3092\u9078\u629e\u3059\u308b","title":"\u30b7\u30ea\u30a2\u30eb\u8a2d\u5b9a"},{"location":"en/raspi-co2/#_4","text":"reboot","title":"\u518d\u8d77\u52d5"},{"location":"en/raspi-co2/#pip-install","text":"sudo su - apt update apt upgrade apt install python3-pip pip3 install --break-system-packages --user mh_z19 python -m mh_z19","title":"pip install"},{"location":"en/raspi-co2/#co2-mh_z19","text":"","title":"CO2\u30bb\u30f3\u30b5\u30fc mh_z19\u63a5\u7d9a"},{"location":"en/raspi-co2/#_5","text":"root@raspberrypi:~# python -m mh_z19 {\"co2\": 593} root@raspberrypi:~#","title":"\u4e8c\u9178\u5316\u70ad\u7d20\u304c\u3068\u308c\u308b"},{"location":"en/raspi-co2/#_6","text":"root@raspberrypi:~# python -m mh_z19 --all {\"co2\": 402, \"temperature\": 26, \"TT\": 66, \"SS\": 0, \"UhUl\": 13568} root@raspberrypi:~#","title":"\u6e29\u5ea6\u3082\u3068\u308c\u308b\u3063\u307d\u3044"},{"location":"en/raspi-co2/#node-exporter","text":"","title":"node-exporter \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/raspi-co2/#text-collect-prometheus-node-exporter-collectors-apt-install","text":"apt install prometheus-node-exporter-collectors","title":"text collect \u3092\u4f7f\u3046\u306e\u3067 prometheus-node-exporter-collectors \u3092 apt install"},{"location":"en/raspi-co2/#node-exporter_1","text":"ls -l /var/lib/prometheus/node-exporter/","title":"node-exporter \u3067\u8aad\u307f\u8fbc\u3080\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u5834\u6240"},{"location":"en/raspi-co2/#_7","text":"","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e"},{"location":"en/raspi-co2/#_8","text":"vi collect-co2.sh \u5185\u5bb9 #!/bin/bash ### file path ### PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=${PRM_PATH}/mh_z19.prom.tmp PRM_FILE=${PRM_PATH}/mh_z19.prom ### collect co2 value ### i=0 while [ $i -le 10 ] do sleep 1 VALUE=`python -m mh_z19 | jq .[]` if [ -z $VALUE ]; then ((i++)) echo \"co2 value is null. retry $i\" else echo \"co2 value is $VALUE\" break fi done ### put prom file ### echo \"mh_z19_co2 $VALUE\" > $TMP_FILE echo \"mh_z19_co2_retry $i\" >> $TMP_FILE mv $TMP_FILE $PRM_FILE exit","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210"},{"location":"en/raspi-co2/#_9","text":"chmod 755 collect-co2.sh ./collect-co2.sh","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"en/raspi-co2/#_10","text":"ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/mh_z19.prom \u51fa\u529b\u4f8b mh_z19_co2 713 mh_z19_co2_retry 0","title":"\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d"},{"location":"en/raspi-co2/#crontab","text":"crontab -e \u8ffd\u52a0\u3059\u308b ### raspi-co2-exporter ### * * * * * /root/collect-co2.sh","title":"crontab"},{"location":"en/raspi-co2/#prometheus","text":"","title":"prometheus \u8a2d\u5b9a"},{"location":"en/raspi-co2/#prometheusyaml","text":"- job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605","title":"prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b"},{"location":"en/raspi-co2/#grafana","text":"","title":"grafana \u8a2d\u5b9a"},{"location":"en/raspi-co2/#grafana-co2json","text":"","title":"grafana-co2.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b"},{"location":"en/raspi-co2/#_11","text":"https://github.com/UedaTakeyuki/mh-z19","title":"\u53c2\u8003"},{"location":"en/raspi-co2/#_12","text":"Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/tinkerforge-exporter/","text":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b \u6982\u8981 \u30e9\u30ba\u30d1\u30a4\u306btinkerforge\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u3002 \u30e9\u30ba\u30d1\u30a4\u306b\u4ee5\u4e0b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb node-exporter (text collecter) tinkerforge brickd tinkerforge shell bindings bc install node-exporter apt install prometheus-node-exporter-collectors tinkerforge brickd wget https://download.tinkerforge.com/tools/brickd/linux/brickd_linux_latest_armhf.deb dpkg -i brickd_linux_latest_armhf.deb tinkerforge shell bindings mkdir tinkerforge cd tinkerforge wget https://download.tinkerforge.com/bindings/shell/tinkerforge_shell_bindings_latest.zip unzip tinkerforge_shell_bindings_latest.zip bc apt install bc \u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e \u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210 vi get-tinkerforge.sh \u5185\u5bb9 #!/bin/bash TF_PATH=/root/tinkerforge TF_CALL=\"${TF_PATH}/tinkerforge call\" PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=$PRM_PATH/tinkerforge.prom.tmp PRM_FILE=$PRM_PATH/tinkerforge.prom ### target sensors ### air_quality_bricklet=\"\" temperature_bricklet=\"\" humidity_bricklet=\"\" ambient_light_v2_bricklet=\"\" dust_detector_bricklet=\"\" ### start echo \"# tinkerfoge sensor values\" | tee $TMP_FILE ### air-quality-bricklet ### if [[ $air_quality_bricklet = \"\" ]] ; then echo \"air-quality-bricklet is n/a\" else TFID=\"$air_quality_bricklet\" #temperture OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #humidity OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #air-pressure OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-air-pressure` #ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` ITEM=tinkerforge_air_pressure VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### temperature-bricklet ### if [[ $temperature_bricklet = \"\" ]] ; then echo \"temperature-bricklet is n/a\" else TFID=$temperature_bricklet OUTPUT=`$TF_CALL temperature-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### humidity-bricklet ### if [[ $humidity_bricklet = \"\" ]] ; then echo \"humidity-bricklet is n/a\" else TFID=$humidity_bricklet OUTPUT=`$TF_CALL humidity-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### ambient-light-v2-bricklet ### if [[ $ambient_light_v2_bricklet = \"\" ]] ; then echo \"ambient-light-v2-bricklet is n/a\" else TFID=$ambient_light_v2_bricklet OUTPUT=`$TF_CALL ambient-light-v2-bricklet $TFID get-illuminance` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### dust-detector-bricklet ### if [[ $dust_detector_bricklet = \"\" ]] ; then echo \"dust-detector-bricklet is n/a\" else TFID=$dust_detector_bricklet OUTPUT=`$TF_CALL dust-detector-bricklet $TFID get-dust-density` ITEM=tinkerforge_dust_density VALUE=`echo $OUTPUT | cut -d\"=\" -f2` echo $ITEM $VALUE | tee -a $TMP_FILE fi mv $TMP_FILE $PRM_FILE \u52d5\u4f5c\u78ba\u8a8d chmod 755 get-tinkerforge.sh ./get-tinkerforge.sh \u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/tinkerforge.prom \u51fa\u529b\u4f8b tinkerforge_temperature 23.31 tinkerforge_humidity 36.57 tinkerforge_air_pressure 1014.67 tinkerforge_illuminance 61.47 tinkerforge_dust_density 25 crontab crontab -e ### tinkerforge-exporter ### * * * * * /root/tinkerforge/get-tinkerforge.sh prometheus \u8a2d\u5b9a prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b - job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605 grafana \u8a2d\u5b9a grafana-tinkerforge.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b \u53c2\u8003 https://github.com/tkhskh/tinkerforge-expoter \u5e83\u544a Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b"},{"location":"en/tinkerforge-exporter/#tinkerforge","text":"","title":"tinkerforge\u3067\u6e29\u5ea6\u3092\u306f\u304b\u308b"},{"location":"en/tinkerforge-exporter/#_1","text":"\u30e9\u30ba\u30d1\u30a4\u306btinkerforge\u30bb\u30f3\u30b5\u30fc\u3092\u63a5\u7d9a\u3057\u3001node-exporter \u3067\u30c7\u30fc\u30bf\u53d6\u5f97\u3059\u308b\u3002","title":"\u6982\u8981"},{"location":"en/tinkerforge-exporter/#_2","text":"node-exporter (text collecter) tinkerforge brickd tinkerforge shell bindings bc","title":"\u30e9\u30ba\u30d1\u30a4\u306b\u4ee5\u4e0b\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/tinkerforge-exporter/#install","text":"","title":"install"},{"location":"en/tinkerforge-exporter/#node-exporter","text":"apt install prometheus-node-exporter-collectors","title":"node-exporter"},{"location":"en/tinkerforge-exporter/#tinkerforge-brickd","text":"wget https://download.tinkerforge.com/tools/brickd/linux/brickd_linux_latest_armhf.deb dpkg -i brickd_linux_latest_armhf.deb","title":"tinkerforge brickd"},{"location":"en/tinkerforge-exporter/#tinkerforge-shell-bindings","text":"mkdir tinkerforge cd tinkerforge wget https://download.tinkerforge.com/bindings/shell/tinkerforge_shell_bindings_latest.zip unzip tinkerforge_shell_bindings_latest.zip","title":"tinkerforge shell bindings"},{"location":"en/tinkerforge-exporter/#bc","text":"apt install bc","title":"bc"},{"location":"en/tinkerforge-exporter/#_3","text":"","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u8a2d\u7f6e"},{"location":"en/tinkerforge-exporter/#_4","text":"vi get-tinkerforge.sh \u5185\u5bb9 #!/bin/bash TF_PATH=/root/tinkerforge TF_CALL=\"${TF_PATH}/tinkerforge call\" PRM_PATH=/var/lib/prometheus/node-exporter TMP_FILE=$PRM_PATH/tinkerforge.prom.tmp PRM_FILE=$PRM_PATH/tinkerforge.prom ### target sensors ### air_quality_bricklet=\"\" temperature_bricklet=\"\" humidity_bricklet=\"\" ambient_light_v2_bricklet=\"\" dust_detector_bricklet=\"\" ### start echo \"# tinkerfoge sensor values\" | tee $TMP_FILE ### air-quality-bricklet ### if [[ $air_quality_bricklet = \"\" ]] ; then echo \"air-quality-bricklet is n/a\" else TFID=\"$air_quality_bricklet\" #temperture OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #humidity OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE #air-pressure OUTPUT=`$TF_CALL air-quality-bricklet $TFID get-air-pressure` #ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` ITEM=tinkerforge_air_pressure VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### temperature-bricklet ### if [[ $temperature_bricklet = \"\" ]] ; then echo \"temperature-bricklet is n/a\" else TFID=$temperature_bricklet OUTPUT=`$TF_CALL temperature-bricklet $TFID get-temperature` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### humidity-bricklet ### if [[ $humidity_bricklet = \"\" ]] ; then echo \"humidity-bricklet is n/a\" else TFID=$humidity_bricklet OUTPUT=`$TF_CALL humidity-bricklet $TFID get-humidity` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### ambient-light-v2-bricklet ### if [[ $ambient_light_v2_bricklet = \"\" ]] ; then echo \"ambient-light-v2-bricklet is n/a\" else TFID=$ambient_light_v2_bricklet OUTPUT=`$TF_CALL ambient-light-v2-bricklet $TFID get-illuminance` ITEM=tinkerforge_`echo $OUTPUT | cut -d\"=\" -f1` VALUE=`echo $OUTPUT | cut -d\"=\" -f2` VALUE=`bc <<< \"scale=2; $VALUE/100\"` echo $ITEM $VALUE | tee -a $TMP_FILE fi ### dust-detector-bricklet ### if [[ $dust_detector_bricklet = \"\" ]] ; then echo \"dust-detector-bricklet is n/a\" else TFID=$dust_detector_bricklet OUTPUT=`$TF_CALL dust-detector-bricklet $TFID get-dust-density` ITEM=tinkerforge_dust_density VALUE=`echo $OUTPUT | cut -d\"=\" -f2` echo $ITEM $VALUE | tee -a $TMP_FILE fi mv $TMP_FILE $PRM_FILE","title":"\u30b9\u30af\u30ea\u30d7\u30c8\u4f5c\u6210"},{"location":"en/tinkerforge-exporter/#_5","text":"chmod 755 get-tinkerforge.sh ./get-tinkerforge.sh","title":"\u52d5\u4f5c\u78ba\u8a8d"},{"location":"en/tinkerforge-exporter/#_6","text":"ls -l /var/lib/prometheus/node-exporter/ cat /var/lib/prometheus/node-exporter/tinkerforge.prom \u51fa\u529b\u4f8b tinkerforge_temperature 23.31 tinkerforge_humidity 36.57 tinkerforge_air_pressure 1014.67 tinkerforge_illuminance 61.47 tinkerforge_dust_density 25","title":"\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d"},{"location":"en/tinkerforge-exporter/#crontab","text":"crontab -e ### tinkerforge-exporter ### * * * * * /root/tinkerforge/get-tinkerforge.sh","title":"crontab"},{"location":"en/tinkerforge-exporter/#prometheus","text":"","title":"prometheus \u8a2d\u5b9a"},{"location":"en/tinkerforge-exporter/#prometheusyaml","text":"- job_name: node # If prometheus-node-exporter is installed, grab stats about the local # machine by default. static_configs: - targets: - localhost:9100 - 192.168.0.50:9100 \u2605","title":"prometheus.yaml \u306b\u8ffd\u8a18\u3059\u308b"},{"location":"en/tinkerforge-exporter/#grafana","text":"","title":"grafana \u8a2d\u5b9a"},{"location":"en/tinkerforge-exporter/#grafana-tinkerforgejson","text":"","title":"grafana-tinkerforge.json \u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b"},{"location":"en/tinkerforge-exporter/#_7","text":"https://github.com/tkhskh/tinkerforge-expoter","title":"\u53c2\u8003"},{"location":"en/tinkerforge-exporter/#_8","text":"Amazon.co.jp : \u4e8c\u9178\u5316\u70ad\u7d20\u30bb\u30f3\u30b5\u30fc mh-z19 \u30e1\u30eb\u30ab\u30ea\uff1a\u30e9\u30ba\u30d1\u30a4 \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"},{"location":"en/zabbix-vmware/","text":"ZABBIX\u69cb\u7bc9 VMware\u7248 \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 https://www.zabbix.com/jp/download_appliance vmdk\u306f\u5909\u63db\u5fc5\u8981\u3060\u3063\u305f vmkfstools -i zabbix-disk1.vmdk.org -d thin zabbix-disk1.vmdk IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4 ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0 IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4 vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1 update dnf update vmtools\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb dnf install open-vm-tools systemctl enable vmtoolsd systemctl start vmtoolsd systemctl status vmtoolsd \u30e1\u30e2 systemctl list-unit-files -t service \u65e5\u672c\u8a9e\u5316 dnf install zabbix-web-japanese GUI http://192.168.0.1 \u30e6\u30fc\u30b6\uff1aAdmin \u30d1\u30b9\u30ef\u30fc\u30c9\uff1azabbix User setting \u30bf\u30a4\u30e0\u30be\u30fc\u30f3 \u8a00\u8a9e \u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b \u5e83\u544a Amazon.co.jp: \uff3b\u6539\u8a023\u7248\uff3dZabbix\u7d71\u5408\u76e3\u8996\u5b9f\u8df5\u5165\u9580: Kindle\u30b9\u30c8\u30a2 \u30e1\u30eb\u30ab\u30ea\uff1a\u3000Zabbix \u7d71\u5408\u76e3\u8996 \uff1a \u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"ZABBIX\u69cb\u7bc9 VMware\u7248"},{"location":"en/zabbix-vmware/#zabbix-vmware","text":"","title":"ZABBIX\u69cb\u7bc9 VMware\u7248"},{"location":"en/zabbix-vmware/#_1","text":"https://www.zabbix.com/jp/download_appliance","title":"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9"},{"location":"en/zabbix-vmware/#vmdk","text":"vmkfstools -i zabbix-disk1.vmdk.org -d thin zabbix-disk1.vmdk","title":"vmdk\u306f\u5909\u63db\u5fc5\u8981\u3060\u3063\u305f"},{"location":"en/zabbix-vmware/#ip","text":"ip a add 192.168.0.10/255.255.255.0 dev eth0 ip link set eth0 up ip r add 192.168.0.10/255.255.255.0 metric 10 via 192.168.0.1 dev eth0","title":"IP\u30a2\u30c9\u30ec\u30b9 \u4e00\u6642\u7684\u306b\u5909\u66f4"},{"location":"en/zabbix-vmware/#ip_1","text":"vi /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=\"eth0\" BOOTPROTO=none NM_CONTROLLED=\"no\" PERSISTENT_DHCLIENT=1 ONBOOT=\"yes\" TYPE=Ethernet IPV4_FAILURE_FATAL=yes NAME=\"eth0\" IPADDR=192.168.0.10 PREFIX=24 PEERDNS=no DNS1=192.168.0.1 DEFROUTE=yes GATEWAY=192.168.0.1","title":"IP\u30a2\u30c9\u30ec\u30b9 \u6052\u4e45\u7684\u306b\u5909\u66f4"},{"location":"en/zabbix-vmware/#update","text":"dnf update","title":"update"},{"location":"en/zabbix-vmware/#vmtools","text":"dnf install open-vm-tools systemctl enable vmtoolsd systemctl start vmtoolsd systemctl status vmtoolsd \u30e1\u30e2 systemctl list-unit-files -t service","title":"vmtools\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"en/zabbix-vmware/#_2","text":"dnf install zabbix-web-japanese","title":"\u65e5\u672c\u8a9e\u5316"},{"location":"en/zabbix-vmware/#gui","text":"http://192.168.0.1 \u30e6\u30fc\u30b6\uff1aAdmin \u30d1\u30b9\u30ef\u30fc\u30c9\uff1azabbix User setting \u30bf\u30a4\u30e0\u30be\u30fc\u30f3 \u8a00\u8a9e \u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b","title":"GUI"},{"location":"en/zabbix-vmware/#_3","text":"Amazon.co.jp: \uff3b\u6539\u8a023\u7248\uff3dZabbix\u7d71\u5408\u76e3\u8996\u5b9f\u8df5\u5165\u9580: Kindle\u30b9\u30c8\u30a2 \u30e1\u30eb\u30ab\u30ea\uff1a\u3000Zabbix \u7d71\u5408\u76e3\u8996 \uff1a \u672c \u4eca\u3059\u3050\u8cfc\u5165","title":"\u5e83\u544a"}]}